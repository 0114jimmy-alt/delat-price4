<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‰è§’æ´²è¡Œå‹• - å°ˆæ¥­æˆ°è¡“æ”¯æ´æœå‹™</title>
    <style>
        /* æ‰€æœ‰åŸºç¤æ¨£å¼ä¿æŒä¸è®Š */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a0e14 0%, #1a1f29 100%);
            color: #ffffff;
            min-height: 100vh;
        }

        /* ç®¡ç†å“¡ç™»å…¥æŒ‰éˆ• */
        .admin-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ff6600;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 9999;
            box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

        .admin-btn:hover {
            background: #ff8800;
            transform: translateY(-2px);
        }

        /* è¨‚å–®é€šçŸ¥æµ®çª— */
        .order-notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #00ff9d, #00cc7d);
            color: #0a0e14;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 255, 157, 0.3);
            z-index: 9998;
            display: none;
            animation: slideIn 0.5s ease;
            max-width: 350px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ç®¡ç†å¾Œå°æ¨£å¼ */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 20, 0.98);
            z-index: 10000;
            overflow-y: auto;
            padding: 20px;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #ff6600;
        }

        .admin-title {
            font-size: 2.5rem;
            color: #ff6600;
            margin-bottom: 10px;
        }

        .admin-login {
            max-width: 400px;
            margin: 50px auto;
            padding: 40px;
            background: rgba(22, 27, 37, 0.95);
            border-radius: 15px;
            border: 2px solid #ff6600;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .login-input {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #333945;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .login-btn {
            background: #00ff9d;
            color: #0a0e14;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            background: #00cc7d;
        }

        /* è¨‚å–®ç®¡ç†é¢æ¿ */
        .orders-panel {
            display: none;
            max-width: 1400px;
            margin: 0 auto;
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .orders-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: rgba(22, 27, 37, 0.8);
            padding: 20px;
            border-radius: 10px;
            min-width: 200px;
            border: 2px solid #333945;
        }

        .stat-number {
            font-size: 2.5rem;
            color: #00ff9d;
            font-weight: bold;
            text-align: center;
        }

        .stat-label {
            text-align: center;
            color: #8a9ba8;
            margin-top: 10px;
        }

        .order-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #333945;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: rgba(255, 102, 0, 0.2);
            border-color: #ff6600;
        }

        .filter-btn.active {
            background: #ff6600;
            border-color: #ff6600;
        }

        /* è¨‚å–®è¡¨æ ¼ */
        .orders-table {
            width: 100%;
            background: rgba(22, 27, 37, 0.8);
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #333945;
            margin-bottom: 30px;
        }

        .table-header {
            display: grid;
            grid-template-columns: 100px 1fr 150px 150px 150px 120px 120px;
            background: rgba(255, 102, 0, 0.2);
            padding: 15px;
            border-bottom: 2px solid #ff6600;
            font-weight: bold;
        }

        .table-row {
            display: grid;
            grid-template-columns: 100px 1fr 150px 150px 150px 120px 120px;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            align-items: center;
        }

        .table-row:hover {
            background: rgba(255, 102, 0, 0.05);
        }

        .order-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-align: center;
        }

        .status-pending { background: #ff9900; color: #000; }
        .status-paid { background: #00ff9d; color: #000; }
        .status-processing { background: #0099ff; color: #fff; }
        .status-completed { background: #6666ff; color: #fff; }
        .status-cancelled { background: #ff6666; color: #fff; }

        .order-actions {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .action-btn.view { background: #0099ff; color: white; }
        .action-btn.edit { background: #ffcc00; color: #000; }
        .action-btn.delete { background: #ff6666; color: white; }

        .action-btn:hover {
            transform: scale(1.05);
        }

        /* è¨‚å–®è©³æƒ…å½ˆçª— */
        .order-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10001;
            padding: 20px;
            overflow-y: auto;
        }

        .order-detail-modal.active {
            display: block;
        }

        .order-detail-content {
            max-width: 800px;
            margin: 50px auto;
            background: rgba(22, 27, 37, 0.95);
            border-radius: 15px;
            padding: 40px;
            border: 2px solid #ff6600;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .order-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .detail-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-section h4 {
            color: #ffcc00;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ff6600;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .detail-label {
            color: #8a9ba8;
        }

        .detail-value {
            color: #ffffff;
            font-weight: bold;
        }

        /* ç³»çµ±è¨­å®š */
        .system-settings {
            margin-top: 40px;
            padding: 30px;
            background: rgba(22, 27, 37, 0.8);
            border-radius: 15px;
            border: 2px solid #0099ff;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .setting-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
        }

        /* è³‡æ–™åŒæ­¥é¢æ¿ */
        .sync-panel {
            background: rgba(0, 255, 157, 0.1);
            border: 2px solid #00ff9d;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .sync-code-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            word-break: break-all;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        /* å°èˆªæ¬„ */
        .navbar {
            background: rgba(22, 27, 37, 0.95);
            border-bottom: 3px solid #ff6600;
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff6600;
            text-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
            text-decoration: none;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            color: #8a9ba8;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-weight: bold;
            cursor: pointer;
        }

        .nav-link:hover {
            color: #ffcc00;
            background: rgba(255, 102, 0, 0.1);
        }

        .nav-link.active {
            color: #ffffff;
            background: #ff6600;
        }

        .book-now-btn {
            background: #00ff9d;
            color: #0a0e14;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }

        .book-now-btn:hover {
            background: #00cc7d;
            transform: scale(1.05);
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* è‹±é›„å€ */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(10, 14, 20, 0.9), rgba(26, 31, 41, 0.9));
            border-radius: 15px;
            margin-bottom: 40px;
            border: 2px solid #ff6600;
        }

        .hero-title {
            font-size: 3.5rem;
            background: linear-gradient(90deg, #ff6600, #ffaa00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 0 15px rgba(255, 102, 0, 0.3);
        }

        .hero-subtitle {
            color: #8a9ba8;
            font-size: 1.3rem;
            margin-bottom: 25px;
        }

        /* æœå‹™å¡ç‰‡ */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .service-card {
            background: rgba(22, 27, 37, 0.8);
            border: 2px solid #333945;
            border-radius: 15px;
            padding: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 102, 0, 0.2);
            border-color: #ff6600;
        }

        .book-btn {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 25px;
            background: #ff6600;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
        }

        .book-btn:hover {
            background: #ff8800;
            transform: scale(1.05);
        }

        /* é è…³ */
        .footer {
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            border-top: 1px solid #333945;
            color: #8a9ba8;
            font-size: 0.9rem;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
                padding: 10px 15px;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .hero-title {
                font-size: 2.2rem;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .table-header {
                display: none;
            }
            
            .table-row {
                display: flex;
                flex-direction: column;
                gap: 10px;
                padding: 20px;
            }
            
            .table-row > div {
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .orders-stats {
                justify-content: center;
            }
            
            .stat-card {
                min-width: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- ç®¡ç†å“¡ç™»å…¥æŒ‰éˆ• -->
    <button class="admin-btn" onclick="openAdminPanel()">
        <span>ğŸ”§</span>
        <span>ç®¡ç†å¾Œå°</span>
    </button>

    <!-- è¨‚å–®é€šçŸ¥æµ®çª— -->
    <div class="order-notification" id="orderNotification">
        <div class="notification-content">
            <div class="notification-icon">ğŸ†•</div>
            <div class="notification-info">
                <h4>æ–°è¨‚å–®é€šçŸ¥</h4>
                <p id="notificationText">æœ‰æ–°çš„è¨‚å–®éœ€è¦è™•ç†ï¼</p>
            </div>
            <button class="close-notification" onclick="closeNotification()">Ã—</button>
        </div>
    </div>

    <!-- ç®¡ç†å¾Œå° -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h1 class="admin-title">ğŸ“Š è¨‚å–®ç®¡ç†å¾Œå°</h1>
            <p style="color: #8a9ba8;">å®Œå…¨å…§åµŒ Â· ç„¡éœ€å¤–éƒ¨è¨­å®š Â· å³æ™‚åŒæ­¥</p>
        </div>

        <!-- ç™»å…¥è¡¨å–® -->
        <div class="admin-login" id="adminLogin">
            <h2 style="color: #ffcc00; text-align: center; margin-bottom: 30px;">ç®¡ç†å“¡ç™»å…¥</h2>
            <div class="login-form">
                <input type="password" id="adminPassword" class="login-input" placeholder="è¼¸å…¥ç®¡ç†å“¡å¯†ç¢¼" autocomplete="off">
                <button onclick="adminLogin()" class="login-btn">ç™»å…¥</button>
                <button onclick="closeAdminPanel()" class="login-btn" style="background: #333945;">å–æ¶ˆ</button>
            </div>
            <p style="text-align: center; margin-top: 20px; color: #8a9ba8; font-size: 0.9rem;">
                æç¤ºï¼šåˆå§‹å¯†ç¢¼ç‚º delta123
            </p>
        </div>

        <!-- è¨‚å–®ç®¡ç†é¢æ¿ -->
        <div class="orders-panel" id="ordersPanel">
            <div class="orders-header">
                <h2 style="color: #ffcc00;">ğŸ“‹ è¨‚å–®åˆ—è¡¨</h2>
                <div class="orders-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalOrders">0</div>
                        <div class="stat-label">ç¸½è¨‚å–®æ•¸</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingOrders">0</div>
                        <div class="stat-label">å¾…è™•ç†</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayOrders">0</div>
                        <div class="stat-label">ä»Šæ—¥è¨‚å–®</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalRevenue">0</div>
                        <div class="stat-label">ç¸½æ”¶å…¥</div>
                    </div>
                </div>
            </div>

            <!-- è¨‚å–®ç¯©é¸å™¨ -->
            <div class="order-filters">
                <button class="filter-btn active" onclick="filterOrders('all')">å…¨éƒ¨è¨‚å–®</button>
                <button class="filter-btn" onclick="filterOrders('pending')">å¾…è™•ç†</button>
                <button class="filter-btn" onclick="filterOrders('paid')">å·²ä»˜æ¬¾</button>
                <button class="filter-btn" onclick="filterOrders('processing')">è™•ç†ä¸­</button>
                <button class="filter-btn" onclick="filterOrders('completed')">å·²å®Œæˆ</button>
                <button class="filter-btn" onclick="filterOrders('cancelled')">å·²å–æ¶ˆ</button>
                <button class="filter-btn" onclick="refreshOrders()" style="background: #00ff9d; color: #0a0e14;">ğŸ”„ åˆ·æ–°</button>
                <button class="filter-btn" onclick="exportOrders()" style="background: #0099ff; color: white;">ğŸ“¤ åŒ¯å‡º</button>
                <button class="filter-btn" onclick="showSyncPanel()" style="background: #ff66ff; color: white;">ğŸ”„ è³‡æ–™åŒæ­¥</button>
                <button onclick="closeAdminPanel()" class="filter-btn" style="background: #ff6666; color: white;">âŒ é—œé–‰</button>
            </div>

            <!-- è¨‚å–®è¡¨æ ¼ -->
            <div class="orders-table">
                <div class="table-header">
                    <div>è¨‚å–®ç·¨è™Ÿ</div>
                    <div>æœå‹™é …ç›®</div>
                    <div>å®¢æˆ¶è³‡è¨Š</div>
                    <div>é ç´„æ™‚é–“</div>
                    <div>é‡‘é¡</div>
                    <div>ç‹€æ…‹</div>
                    <div>æ“ä½œ</div>
                </div>
                <div id="ordersList">
                    <!-- è¨‚å–®å°‡å‹•æ…‹ç”Ÿæˆåœ¨é€™è£¡ -->
                </div>
            </div>

            <!-- è³‡æ–™åŒæ­¥é¢æ¿ -->
            <div class="sync-panel" id="syncPanel" style="display: none;">
                <h3 style="color: #00ff9d; margin-bottom: 15px;">ğŸ”„ è·¨è£ç½®è³‡æ–™åŒæ­¥</h3>
                <p style="color: #8a9ba8; margin-bottom: 15px;">
                    å°‡ä»¥ä¸‹åŒæ­¥ç¢¼åˆ†äº«çµ¦å…¶ä»–ç®¡ç†å“¡ï¼Œæˆ–è¼¸å…¥åŒæ­¥ç¢¼ä¾†åŒæ­¥è¨‚å–®è³‡æ–™ï¼š
                </p>
                
                <div class="settings-grid">
                    <div class="setting-item">
                        <h4 style="color: #ffcc00; margin-bottom: 10px;">ç”¢ç”ŸåŒæ­¥ç¢¼</h4>
                        <button onclick="generateSyncCode()" class="login-btn" style="width: 100%;">ç”¢ç”Ÿæ–°åŒæ­¥ç¢¼</button>
                        <div class="sync-code-display" id="syncCodeDisplay">
                            é»æ“Šä¸Šæ–¹æŒ‰éˆ•ç”¢ç”ŸåŒæ­¥ç¢¼
                        </div>
                        <p style="color: #8a9ba8; font-size: 0.8rem; margin-top: 10px;">
                            æ­¤åŒæ­¥ç¢¼24å°æ™‚å…§æœ‰æ•ˆï¼Œåˆ†äº«çµ¦å…¶ä»–ç®¡ç†å“¡
                        </p>
                    </div>
                    
                    <div class="setting-item">
                        <h4 style="color: #ffcc00; margin-bottom: 10px;">è¼¸å…¥åŒæ­¥ç¢¼</h4>
                        <textarea id="inputSyncCode" class="login-input" placeholder="è²¼ä¸ŠåŒæ­¥ç¢¼..." rows="4" style="width: 100%;"></textarea>
                        <button onclick="importFromSyncCode()" class="login-btn" style="width: 100%; margin-top: 10px; background: #ffcc00; color: #000;">åŒ¯å…¥è³‡æ–™</button>
                        <p style="color: #8a9ba8; font-size: 0.8rem; margin-top: 10px;">
                            è²¼ä¸Šå…¶ä»–ç®¡ç†å“¡åˆ†äº«çš„åŒæ­¥ç¢¼ä¾†åŒæ­¥è³‡æ–™
                        </p>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(255, 102, 0, 0.1); border-radius: 8px;">
                    <strong style="color: #ffcc00;">ğŸ’¡ åŒæ­¥èªªæ˜ï¼š</strong>
                    <ul style="color: #8a9ba8; margin-top: 10px; padding-left: 20px;">
                        <li>æ¯å€‹ç®¡ç†å“¡éƒ½æœƒçœ‹åˆ°ç›¸åŒçš„è¨‚å–®è³‡æ–™</li>
                        <li>åŒæ­¥ç¢¼è‡ªå‹•åŠ å¯†ï¼Œä¿éšœè³‡æ–™å®‰å…¨</li>
                        <li>è¨‚å–®ç‹€æ…‹æ›´æ–°æœƒå³æ™‚åŒæ­¥</li>
                        <li>å»ºè­°å®šæœŸåŒæ­¥ä»¥ä¿æŒè³‡æ–™ä¸€è‡´</li>
                    </ul>
                </div>
            </div>

            <!-- ç³»çµ±è¨­å®š -->
            <div class="system-settings">
                <h3 style="color: #0099ff; margin-bottom: 20px;">âš™ï¸ ç³»çµ±è¨­å®š</h3>
                <div class="settings-grid">
                    <div class="setting-item">
                        <h4 style="color: #ffcc00; margin-bottom: 10px;">åŸºæœ¬è¨­å®š</h4>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; color: #8a9ba8; margin-bottom: 5px;">ç®¡ç†å“¡å¯†ç¢¼ï¼š</label>
                            <input type="password" id="newAdminPassword" class="login-input" placeholder="è¼¸å…¥æ–°å¯†ç¢¼" style="width: 100%;">
                        </div>
                        <button onclick="changeAdminPassword()" class="login-btn" style="width: 100%;">æ›´æ”¹å¯†ç¢¼</button>
                    </div>
                    
                    <div class="setting-item">
                        <h4 style="color: #ffcc00; margin-bottom: 10px;">é€šçŸ¥è¨­å®š</h4>
                        <div style="margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; gap: 10px; color: #8a9ba8;">
                                <input type="checkbox" id="enableNotifications" checked>
                                å•Ÿç”¨æ–°è¨‚å–®é€šçŸ¥
                            </label>
                        </div>
                        <button onclick="saveNotificationSettings()" class="login-btn" style="width: 100%; background: #ffcc00; color: #000;">å„²å­˜è¨­å®š</button>
                    </div>
                    
                    <div class="setting-item">
                        <h4 style="color: #ffcc00; margin-bottom: 10px;">è³‡æ–™ç®¡ç†</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button onclick="exportOrders()" class="login-btn" style="width: 100%; background: #0099ff;">åŒ¯å‡ºè¨‚å–®</button>
                            <button onclick="backupData()" class="login-btn" style="width: 100%; background: #6666ff;">å‚™ä»½è³‡æ–™</button>
                            <button onclick="clearOldOrders()" class="login-btn" style="width: 100%; background: #ff6666;">æ¸…é™¤èˆŠè¨‚å–®</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¨‚å–®è©³æƒ…å½ˆçª— -->
            <div class="order-detail-modal" id="orderDetailModal">
                <div class="order-detail-content">
                    <button class="close-modal" onclick="closeOrderDetail()">Ã—</button>
                    <h2 style="color: #ffcc00; margin-bottom: 20px;">ğŸ“„ è¨‚å–®è©³æƒ…</h2>
                    
                    <div class="order-detail-grid">
                        <div class="detail-section">
                            <h4>è¨‚å–®è³‡è¨Š</h4>
                            <div class="detail-item">
                                <span class="detail-label">è¨‚å–®ç·¨è™Ÿï¼š</span>
                                <span class="detail-value" id="detailOrderId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">æœå‹™é …ç›®ï¼š</span>
                                <span class="detail-value" id="detailService">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">æœå‹™è©³æƒ…ï¼š</span>
                                <span class="detail-value" id="detailDescription">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">è¨‚å–®é‡‘é¡ï¼š</span>
                                <span class="detail-value" id="detailAmount">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">å»ºç«‹æ™‚é–“ï¼š</span>
                                <span class="detail-value" id="detailCreateTime">-</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h4>å®¢æˆ¶è³‡è¨Š</h4>
                            <div class="detail-item">
                                <span class="detail-label">éŠæˆ²IDï¼š</span>
                                <span class="detail-value" id="detailGameId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">è¯çµ¡æ–¹å¼ï¼š</span>
                                <span class="detail-value" id="detailContactType">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">è¯çµ¡å¸³è™Ÿï¼š</span>
                                <span class="detail-value" id="detailContactId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">é ç´„æ™‚é–“ï¼š</span>
                                <span class="detail-value" id="detailBookingTime">-</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h4>ä»˜æ¬¾è³‡è¨Š</h4>
                            <div class="detail-item">
                                <span class="detail-label">ä»˜æ¬¾æ–¹å¼ï¼š</span>
                                <span class="detail-value" id="detailPaymentMethod">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">ä»˜æ¬¾ç‹€æ…‹ï¼š</span>
                                <span class="detail-value" id="detailPaymentStatus">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">ä»˜æ¬¾æ™‚é–“ï¼š</span>
                                <span class="detail-value" id="detailPaymentTime">-</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h4>è¨‚å–®ç®¡ç†</h4>
                            <div class="detail-item">
                                <span class="detail-label">ç•¶å‰ç‹€æ…‹ï¼š</span>
                                <span class="detail-value" id="detailStatus">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">è² è²¬æ‰“æ‰‹ï¼š</span>
                                <span class="detail-value" id="detailAssignedTo">æœªæŒ‡æ´¾</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">å‚™è¨»ï¼š</span>
                                <span class="detail-value" id="detailNotes">ç„¡</span>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <button onclick="updateOrderStatus('paid')" class="action-btn view">æ¨™è¨˜ç‚ºå·²ä»˜æ¬¾</button>
                        <button onclick="updateOrderStatus('processing')" class="action-btn edit">é–‹å§‹è™•ç†</button>
                        <button onclick="updateOrderStatus('completed')" class="action-btn" style="background: #6666ff;">å®Œæˆè¨‚å–®</button>
                        <button onclick="updateOrderStatus('cancelled')" class="action-btn delete">å–æ¶ˆè¨‚å–®</button>
                        <button onclick="assignToMe()" class="action-btn" style="background: #ff66ff;">æˆ‘ä¾†è™•ç†</button>
                        <button onclick="addOrderNote()" class="action-btn" style="background: #ffcc00; color: #000;">æ–°å¢å‚™è¨»</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸»ç¶²ç«™å…§å®¹ -->
    <nav class="navbar">
        <a href="#" class="logo" onclick="showTab('home')">ä¸‰è§’æ´²è¡Œå‹• Â· å°ˆæ¥­æˆ°è¡“æ”¯æ´</a>
        <div class="nav-links">
            <a href="#" class="nav-link active" onclick="showTab('home')">é¦–é </a>
            <a href="#" class="nav-link" onclick="showTab('escort')">è­·èˆªæœå‹™</a>
            <a href="#" class="nav-link" onclick="showTab('betting')">è³­ç´„å–®</a>
            <a href="#" class="nav-link" onclick="showTab('entertainment')">å¨›æ¨‚ç©æ³•</a>
            <a href="#" class="nav-link" onclick="showTab('peipei')">å¨›æ¨‚é™ªç©</a>
            <a href="#" class="nav-link" onclick="showTab('rules')">è¦å‰‡æ¢æ¬¾</a>
            <a href="#" class="nav-link book-now-btn" onclick="showTab('payment')">ç«‹å³é ç´„</a>
        </div>
    </nav>

    <div class="container">
        <!-- ç¶²ç«™å…§å®¹ï¼ˆç°¡åŒ–ç‰ˆæœ¬ï¼‰ -->
        <div class="tab-content active" id="home">
            <div class="hero">
                <h1 class="hero-title">ä¸‰è§’æ´²è¡Œå‹• Â· å°ˆæ¥­æˆ°è¡“æ”¯æ´</h1>
                <p class="hero-subtitle">é ‚å°–æ‰“æ‰‹åœ˜éšŠ Â· å°ˆæ¥­è­·èˆªæœå‹™ Â· å®‰å…¨é«˜æ•ˆä¿éšœ</p>
                <div style="margin-top: 30px;">
                    <button onclick="showTab('escort')" style="background: #ff6600; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin: 0 10px;">
                        æŸ¥çœ‹è­·èˆªæœå‹™
                    </button>
                    <button onclick="showTab('payment')" style="background: #00ff9d; color: #0a0e14; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin: 0 10px; font-weight: bold;">
                        ç«‹å³é ç´„ä»˜æ¬¾
                    </button>
                </div>
            </div>

            <div class="services-grid">
                <!-- æœå‹™å¡ç‰‡... -->
            </div>
        </div>

        <!-- ä»˜æ¬¾é é¢ -->
        <div class="tab-content" id="payment">
            <div style="max-width: 800px; margin: 0 auto; padding: 40px 20px;">
                <h1 style="color: #00ff9d; text-align: center; margin-bottom: 30px;">é ç´„ä»˜æ¬¾ç³»çµ±</h1>
                
                <div id="paymentSteps">
                    <!-- ä»˜æ¬¾æ­¥é©Ÿå°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div>ä¸‰è§’æ´²è¡Œå‹• Â· å°ˆæ¥­æˆ°è¡“æ”¯æ´æœå‹™</div>
        <div style="margin-top: 10px;">Â© 2024 ä¸‰è§’æ´²è¡Œå‹•æˆ°è¡“æ”¯æ´æœå‹™ä¸­å¿ƒ | ç‰ˆæœ¬ï¼š2024.01</div>
        <div style="margin-top: 10px; font-size: 0.8rem; color: #666;">æœ¬æœå‹™åƒ…ä¾›å¨›æ¨‚åƒè€ƒï¼Œè«‹éµå®ˆéŠæˆ²è¦å‰‡èˆ‡ç›¸é—œæ³•å¾‹</div>
    </footer>

    <script>
        // ============================
        // å…¨åŸŸè¨­å®šèˆ‡è®Šæ•¸
        // ============================
        
        const SYSTEM_CONFIG = {
            ADMIN_PASSWORD: localStorage.getItem('admin_password') || 'delta123',
            ENABLE_NOTIFICATIONS: localStorage.getItem('enable_notifications') !== 'false',
            SYNC_CODE_EXPIRY: 24 * 60 * 60 * 1000 // 24å°æ™‚
        };
        
        const ORDER_STATUS = {
            PENDING: 'pending',
            PAID: 'paid',
            PROCESSING: 'processing',
            COMPLETED: 'completed',
            CANCELLED: 'cancelled'
        };
        
        let orders = JSON.parse(localStorage.getItem('delta_orders')) || [];
        let currentFilter = 'all';
        let currentOrderId = null;
        let notificationCheckInterval = null;
        
        // ============================
        // åˆå§‹åŒ–
        // ============================
        
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–ç¶²ç«™åŠŸèƒ½
            initWebsite();
            
            // åˆå§‹åŒ–ç®¡ç†ç³»çµ±
            initAdminSystem();
            
            // è¼‰å…¥æ¸¬è©¦è¨‚å–®ï¼ˆåˆæ¬¡ä½¿ç”¨æ™‚ï¼‰
            if (orders.length === 0) {
                loadSampleOrders();
            }
            
            // é–‹å§‹è¨‚å–®é€šçŸ¥æª¢æŸ¥
            startNotificationCheck();
        });
        
        function initWebsite() {
            // é é¢åˆ‡æ›åŠŸèƒ½
            window.showTab = function(tabId) {
                // éš±è—æ‰€æœ‰åˆ†é 
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // ç§»é™¤æ‰€æœ‰å°èˆªé€£çµçš„activeé¡
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                // é¡¯ç¤ºé¸ä¸­çš„åˆ†é 
                const targetTab = document.getElementById(tabId);
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                
                // æ¿€æ´»å°æ‡‰çš„å°èˆªé€£çµ
                const activeLink = document.querySelector(`[onclick="showTab('${tabId}')"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
                
                // å¦‚æœæ˜¯ä»˜æ¬¾é é¢ï¼Œåˆå§‹åŒ–ä»˜æ¬¾æµç¨‹
                if (tabId === 'payment') {
                    initPaymentProcess();
                }
                
                // æ»¾å‹•åˆ°é ‚éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            
            // è¨­ç½®é ç´„æŒ‰éˆ•
            setupBookingButtons();
        }
        
        function initAdminSystem() {
            // è¼‰å…¥è¨­å®šåˆ°è¡¨å–®
            document.getElementById('enableNotifications').checked = SYSTEM_CONFIG.ENABLE_NOTIFICATIONS;
        }
        
        // ============================
        // ä»˜æ¬¾æµç¨‹åŠŸèƒ½
        // ============================
        
        function initPaymentProcess() {
            const paymentSteps = document.getElementById('paymentSteps');
            if (!paymentSteps) return;
            
            paymentSteps.innerHTML = `
                <div style="background: rgba(22, 27, 37, 0.8); border-radius: 15px; padding: 40px; border: 2px solid #00ff9d;">
                    <h2 style="color: #ffcc00; text-align: center; margin-bottom: 30px;">ğŸ“ é ç´„æµç¨‹</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
                        <div style="text-align: center; padding: 20px; background: rgba(255, 102, 0, 0.1); border-radius: 10px;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">1ï¸âƒ£</div>
                            <h3 style="color: #ffcc00;">é¸æ“‡æœå‹™</h3>
                            <p style="color: #8a9ba8;">é¸æ“‡æ‚¨éœ€è¦çš„æœå‹™é …ç›®</p>
                        </div>
                        <div style="text-align: center; padding: 20px; background: rgba(0, 255, 157, 0.1); border-radius: 10px;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">2ï¸âƒ£</div>
                            <h3 style="color: #00ff9d;">å¡«å¯«è³‡æ–™</h3>
                            <p style="color: #8a9ba8;">å¡«å¯«éŠæˆ²IDå’Œè¯çµ¡æ–¹å¼</p>
                        </div>
                        <div style="text-align: center; padding: 20px; background: rgba(0, 150, 255, 0.1); border-radius: 10px;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">3ï¸âƒ£</div>
                            <h3 style="color: #66b3ff;">é¸æ“‡æ™‚é–“</h3>
                            <p style="color: #8a9ba8;">é¸æ“‡é ç´„æ™‚é–“å’Œä»˜æ¬¾æ–¹å¼</p>
                        </div>
                        <div style="text-align: center; padding: 20px; background: rgba(255, 204, 0, 0.1); border-radius: 10px;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">4ï¸âƒ£</div>
                            <h3 style="color: #ffcc00;">å®Œæˆé ç´„</h3>
                            <p style="color: #8a9ba8;">ç³»çµ±ç”¢ç”Ÿè¨‚å–®ç·¨è™Ÿ</p>
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <h3 style="color: #ffffff; margin-bottom: 20px;">é¸æ“‡æœå‹™é¡å‹ï¼š</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center;">
                            <button onclick="startBooking('åŸºç¤å–®')" style="background: #ff6600; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer;">
                                è­·èˆªæœå‹™
                            </button>
                            <button onclick="startBooking('ç”·é™ªç©')" style="background: #0099ff; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer;">
                                é™ªç©æœå‹™
                            </button>
                            <button onclick="startBooking('è³­ç´„å–®')" style="background: #ff66ff; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer;">
                                è³­ç´„æœå‹™
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function startBooking(serviceType) {
            // æ¸…ç©ºå…ˆå‰çš„è¡¨å–®
            const paymentSteps = document.getElementById('paymentSteps');
            paymentSteps.innerHTML = '';
            
            // å»ºç«‹æ–°çš„è¨‚å–®è¡¨å–®
            const formHtml = `
                <div style="background: rgba(22, 27, 37, 0.8); border-radius: 15px; padding: 40px; border: 2px solid #00ff9d;">
                    <h2 style="color: #ffcc00; text-align: center; margin-bottom: 30px;">ğŸ“‹ ${serviceType} é ç´„è¡¨å–®</h2>
                    
                    <form id="bookingForm" onsubmit="submitBooking(event, '${serviceType}')">
                        <div style="display: grid; gap: 20px;">
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">éŠæˆ²IDï¼ˆæš±ç¨±ï¼‰</label>
                                <input type="text" required style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid #333945; border-radius: 8px; color: white; font-size: 1rem;" placeholder="è«‹è¼¸å…¥æ‚¨çš„éŠæˆ²ID">
                            </div>
                            
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">è¯çµ¡æ–¹å¼</label>
                                <select required style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid #333945; border-radius: 8px; color: white; font-size: 1rem;">
                                    <option value="">é¸æ“‡è¯çµ¡æ–¹å¼</option>
                                    <option value="line">LINE</option>
                                    <option value="discord">Discord</option>
                                    <option value="wechat">å¾®ä¿¡</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">è¯çµ¡å¸³è™Ÿ</label>
                                <input type="text" required style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid #333945; border-radius: 8px; color: white; font-size: 1rem;" placeholder="è«‹è¼¸å…¥æ‚¨çš„è¯çµ¡å¸³è™Ÿ">
                            </div>
                            
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">é ç´„æ™‚é–“</label>
                                <input type="datetime-local" required style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid #333945; border-radius: 8px; color: white; font-size: 1rem;">
                            </div>
                            
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">æœå‹™é …ç›®</label>
                                <input type="text" value="${serviceType}" readonly style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.05); border: 2px solid #333945; border-radius: 8px; color: #8a9ba8; font-size: 1rem;">
                            </div>
                            
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">é‡‘é¡ï¼ˆå…ƒï¼‰</label>
                                <input type="number" required style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid #333945; border-radius: 8px; color: white; font-size: 1rem;" placeholder="è«‹è¼¸å…¥é‡‘é¡" min="1">
                            </div>
                            
                            <div>
                                <label style="display: block; color: #66b3ff; margin-bottom: 8px; font-weight: bold;">ç‰¹æ®Šéœ€æ±‚ï¼ˆé¸å¡«ï¼‰</label>
                                <textarea style="width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid #333945; border-radius: 8px; color: white; font-size: 1rem; min-height: 100px;" placeholder="è«‹è¼¸å…¥ä»»ä½•ç‰¹æ®Šéœ€æ±‚..."></textarea>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px; display: flex; gap: 15px;">
                            <button type="button" onclick="initPaymentProcess()" style="flex: 1; padding: 15px; background: #333945; color: white; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer;">è¿”å›</button>
                            <button type="submit" style="flex: 2; padding: 15px; background: #00ff9d; color: #0a0e14; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer;">æäº¤é ç´„</button>
                        </div>
                    </form>
                </div>
            `;
            
            paymentSteps.innerHTML = formHtml;
            
            // è¨­å®šé ç´„æ™‚é–“çš„æœ€å°å€¼ç‚ºç¾åœ¨
            const timeInput = paymentSteps.querySelector('input[type="datetime-local"]');
            const now = new Date();
            const minDate = new Date(now.getTime() + 3600000); // 1å°æ™‚å¾Œ
            timeInput.min = minDate.toISOString().slice(0, 16);
            timeInput.value = minDate.toISOString().slice(0, 16);
        }
        
        function submitBooking(event, serviceType) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            const inputs = form.querySelectorAll('input, select, textarea');
            
            // æ”¶é›†è¡¨å–®è³‡æ–™
            const bookingData = {
                gameId: inputs[0].value,
                contactType: inputs[1].value,
                contactId: inputs[2].value,
                bookingTime: inputs[3].value,
                serviceName: serviceType,
                amount: inputs[5].value,
                specialRequest: inputs[6].value,
                status: ORDER_STATUS.PENDING,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // å»ºç«‹è¨‚å–®
            createOrder(bookingData);
            
            // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
            const orderId = `DELTA-${new Date().getTime().toString().slice(-8)}`;
            
            const paymentSteps = document.getElementById('paymentSteps');
            paymentSteps.innerHTML = `
                <div style="background: rgba(22, 27, 37, 0.8); border-radius: 15px; padding: 40px; border: 2px solid #00ff9d; text-align: center;">
                    <div style="font-size: 4rem; color: #00ff9d; margin-bottom: 20px;">âœ…</div>
                    <h2 style="color: #00ff9d; margin-bottom: 20px;">é ç´„æˆåŠŸï¼</h2>
                    
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 25px; border-radius: 10px; margin: 25px 0;">
                        <div style="display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span style="color: #8a9ba8;">è¨‚å–®ç·¨è™Ÿ</span>
                            <span style="color: #ffcc00; font-weight: bold; font-size: 1.2rem;">${orderId}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span style="color: #8a9ba8;">æœå‹™é …ç›®</span>
                            <span style="color: #ffffff; font-weight: bold;">${serviceType}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 15px 0;">
                            <span style="color: #8a9ba8;">é ç´„æ™‚é–“</span>
                            <span style="color: #ffffff; font-weight: bold;">${bookingData.bookingTime}</span>
                        </div>
                    </div>
                    
                    <div style="margin: 30px 0;">
                        <h3 style="color: #66b3ff; margin-bottom: 15px;">ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ</h3>
                        <div style="color: #8a9ba8; text-align: left; max-width: 500px; margin: 0 auto;">
                            1. è«‹åœ¨ <strong style="color: #ffcc00;">15åˆ†é˜å…§</strong> å®Œæˆä»˜æ¬¾<br>
                            2. ä»˜æ¬¾å¾Œè«‹å°‡ <strong style="color: #ffcc00;">ä»˜æ¬¾è­‰æ˜æˆªåœ–</strong><br>
                            3. è¯ç¹«å®¢æœæä¾›è¨‚å–®ç·¨è™ŸåŠä»˜æ¬¾è­‰æ˜<br>
                            4. å®¢æœç¢ºèªå¾Œæœƒç«‹å³ç‚ºæ‚¨å®‰æ’æœå‹™
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="showTab('home')" style="padding: 15px 30px; background: #333945; color: white; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer;">è¿”å›é¦–é </button>
                        <button onclick="window.open('https://line.me/R/ti/p/@deltaforce', '_blank')" style="padding: 15px 30px; background: #00ff9d; color: #0a0e14; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer;">è¯ç¹«å®¢æœå®Œæˆä»˜æ¬¾</button>
                    </div>
                </div>
            `;
        }
        
        function setupBookingButtons() {
            // è¨­ç½®ç¶²ç«™ä¸Šçš„é ç´„æŒ‰éˆ•
            document.querySelectorAll('.book-btn').forEach(btn => {
                if (!btn.onclick) {
                    btn.onclick = function() {
                        const card = this.closest('.service-card');
                        const serviceType = card.querySelector('h2').textContent.replace(/[ğŸ›¡ï¸ğŸ®âš¡]/g, '').trim();
                        showTab('payment');
                        setTimeout(() => startBooking(serviceType), 100);
                    };
                }
            });
        }
        
        // ============================
        // è¨‚å–®ç®¡ç†åŠŸèƒ½
        // ============================
        
        function createOrder(orderData) {
            const orderId = `DELTA-${new Date().getTime().toString().slice(-8)}`;
            
            const newOrder = {
                id: orderId,
                ...orderData,
                paymentMethod: 'å¾…ç¢ºèª',
                paymentTime: null,
                assignedTo: null,
                notes: ''
            };
            
            orders.unshift(newOrder);
            saveOrders();
            
            // ç™¼é€é€šçŸ¥
            if (SYSTEM_CONFIG.ENABLE_NOTIFICATIONS) {
                showNewOrderNotification(newOrder);
            }
            
            return orderId;
        }
        
        function saveOrders() {
            localStorage.setItem('delta_orders', JSON.stringify(orders));
        }
        
        function refreshOrders() {
            renderOrders();
            updateOrderStats();
        }
        
        function filterOrders(status) {
            currentFilter = status;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderOrders();
        }
        
        function renderOrders() {
            const ordersList = document.getElementById('ordersList');
            if (!ordersList) return;
            
            let filteredOrders = [...orders];
            
            // æ‡‰ç”¨ç¯©é¸
            if (currentFilter !== 'all') {
                filteredOrders = orders.filter(order => order.status === currentFilter);
            }
            
            // æ’åºï¼šæœ€æ–°çš„åœ¨æœ€ä¸Šé¢
            filteredOrders.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            // æ¸…ç©ºåˆ—è¡¨
            ordersList.innerHTML = '';
            
            if (filteredOrders.length === 0) {
                ordersList.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: #8a9ba8;">
                        <div>æš«ç„¡è¨‚å–®è³‡æ–™</div>
                    </div>
                `;
                return;
            }
            
            // æ¸²æŸ“æ¯å€‹è¨‚å–®
            filteredOrders.forEach(order => {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div>${order.id}</div>
                    <div>${order.serviceName}</div>
                    <div>${order.gameId}</div>
                    <div>${formatDateTime(order.bookingTime)}</div>
                    <div>${order.amount}å…ƒ</div>
                    <div><span class="order-status status-${order.status}">${getStatusText(order.status)}</span></div>
                    <div class="order-actions">
                        <button class="action-btn view" onclick="viewOrderDetail('${order.id}')">æŸ¥çœ‹</button>
                        <button class="action-btn edit" onclick="editOrder('${order.id}')">ç·¨è¼¯</button>
                        <button class="action-btn delete" onclick="deleteOrder('${order.id}')">åˆªé™¤</button>
                    </div>
                `;
                ordersList.appendChild(row);
            });
        }
        
        function updateOrderStats() {
            const totalOrders = orders.length;
            const pendingOrders = orders.filter(o => o.status === ORDER_STATUS.PENDING).length;
            const today = new Date().toISOString().split('T')[0];
            const todayOrders = orders.filter(o => o.createdAt.split('T')[0] === today).length;
            const totalRevenue = orders
                .filter(o => o.status !== ORDER_STATUS.CANCELLED)
                .reduce((sum, order) => sum + parseInt(order.amount || 0), 0);
            
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('pendingOrders').textContent = pendingOrders;
            document.getElementById('todayOrders').textContent = todayOrders;
            document.getElementById('totalRevenue').textContent = totalRevenue + 'å…ƒ';
        }
        
        function viewOrderDetail(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            currentOrderId = orderId;
            
            // å¡«å……è¨‚å–®è©³æƒ…
            const detailElements = {
                'detailOrderId': order.id,
                'detailService': order.serviceName,
                'detailDescription': order.specialRequest || 'ç„¡',
                'detailAmount': order.amount + 'å…ƒ',
                'detailCreateTime': formatDateTime(order.createdAt),
                'detailGameId': order.gameId,
                'detailContactType': getContactTypeText(order.contactType),
                'detailContactId': order.contactId,
                'detailBookingTime': formatDateTime(order.bookingTime),
                'detailPaymentMethod': order.paymentMethod || 'å¾…ç¢ºèª',
                'detailPaymentStatus': order.status === ORDER_STATUS.PENDING ? 'å¾…ä»˜æ¬¾' : 'å·²ä»˜æ¬¾',
                'detailPaymentTime': order.paymentTime ? formatDateTime(order.paymentTime) : 'å°šæœªä»˜æ¬¾',
                'detailStatus': `<span class="order-status status-${order.status}">${getStatusText(order.status)}</span>`,
                'detailAssignedTo': order.assignedTo || 'æœªæŒ‡æ´¾',
                'detailNotes': order.notes || 'ç„¡'
            };
            
            for (const [id, value] of Object.entries(detailElements)) {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = value;
                }
            }
            
            // é¡¯ç¤ºå½ˆçª—
            document.getElementById('orderDetailModal').classList.add('active');
        }
        
        function closeOrderDetail() {
            document.getElementById('orderDetailModal').classList.remove('active');
        }
        
        function updateOrderStatus(newStatus) {
            if (!currentOrderId) return;
            
            const orderIndex = orders.findIndex(o => o.id === currentOrderId);
            if (orderIndex === -1) return;
            
            orders[orderIndex].status = newStatus;
            orders[orderIndex].updatedAt = new Date().toISOString();
            
            // å¦‚æœæ˜¯ä»˜æ¬¾ç‹€æ…‹ï¼Œè¨˜éŒ„ä»˜æ¬¾æ™‚é–“
            if (newStatus === ORDER_STATUS.PAID && !orders[orderIndex].paymentTime) {
                orders[orderIndex].paymentTime = new Date().toISOString();
            }
            
            saveOrders();
            refreshOrders();
            
            // æ›´æ–°è©³æƒ…è¦–çª—
            viewOrderDetail(currentOrderId);
            
            alert(`è¨‚å–®ç‹€æ…‹å·²æ›´æ–°ç‚ºï¼š${getStatusText(newStatus)}`);
        }
        
        function assignToMe() {
            if (!currentOrderId) return;
            
            const playerName = prompt('è«‹è¼¸å…¥æ‚¨çš„åå­—ï¼ˆæ‰“æ‰‹æš±ç¨±ï¼‰ï¼š');
            if (playerName) {
                const orderIndex = orders.findIndex(o => o.id === currentOrderId);
                orders[orderIndex].assignedTo = playerName;
                orders[orderIndex].notes = `å·²æŒ‡æ´¾çµ¦ ${playerName} è™•ç†`;
                orders[orderIndex].status = ORDER_STATUS.PROCESSING;
                orders[orderIndex].updatedAt = new Date().toISOString();
                
                saveOrders();
                refreshOrders();
                viewOrderDetail(currentOrderId);
                
                alert(`è¨‚å–®å·²æŒ‡æ´¾çµ¦ ${playerName} è™•ç†ï¼`);
            }
        }
        
        function addOrderNote() {
            if (!currentOrderId) return;
            
            const note = prompt('è«‹è¼¸å…¥å‚™è¨»ï¼š');
            if (note) {
                const orderIndex = orders.findIndex(o => o.id === currentOrderId);
                const currentNotes = orders[orderIndex].notes || '';
                orders[orderIndex].notes = currentNotes ? `${currentNotes}\n${note}` : note;
                orders[orderIndex].updatedAt = new Date().toISOString();
                
                saveOrders();
                refreshOrders();
                viewOrderDetail(currentOrderId);
                
                alert('å‚™è¨»å·²æ–°å¢ï¼');
            }
        }
        
        function editOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const notes = prompt('è«‹è¼¸å…¥è¨‚å–®å‚™è¨»ï¼š', order.notes || '');
            if (notes !== null) {
                order.notes = notes;
                order.updatedAt = new Date().toISOString();
                saveOrders();
                refreshOrders();
                alert('è¨‚å–®å‚™è¨»å·²æ›´æ–°ï¼');
            }
        }
        
        function deleteOrder(orderId) {
            if (!confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹è¨‚å–®å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ¢å¾©ï¼')) {
                return;
            }
            
            const orderIndex = orders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                orders.splice(orderIndex, 1);
                saveOrders();
                refreshOrders();
                alert('è¨‚å–®å·²åˆªé™¤ï¼');
                
                if (currentOrderId === orderId) {
                    closeOrderDetail();
                }
            }
        }
        
        // ============================
        // ç®¡ç†å¾Œå°ä»‹é¢
        // ============================
        
        function openAdminPanel() {
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('ordersPanel').style.display = 'none';
            document.getElementById('syncPanel').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }
        
        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('active');
        }
        
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === SYSTEM_CONFIG.ADMIN_PASSWORD) {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('ordersPanel').style.display = 'block';
                refreshOrders();
            } else {
                alert('å¯†ç¢¼éŒ¯èª¤ï¼');
            }
        }
        
        function showSyncPanel() {
            const syncPanel = document.getElementById('syncPanel');
            syncPanel.style.display = syncPanel.style.display === 'none' ? 'block' : 'none';
        }
        
        // ============================
        // è³‡æ–™åŒæ­¥åŠŸèƒ½
        // ============================
        
        function generateSyncCode() {
            const syncData = {
                orders: orders,
                timestamp: new Date().getTime(),
                expiry: new Date().getTime() + SYSTEM_CONFIG.SYNC_CODE_EXPIRY
            };
            
            // å°‡è³‡æ–™è½‰ç‚ºBase64ç·¨ç¢¼
            const jsonString = JSON.stringify(syncData);
            const syncCode = btoa(encodeURIComponent(jsonString));
            
            document.getElementById('syncCodeDisplay').textContent = syncCode;
            
            // è‡ªå‹•è¤‡è£½åˆ°å‰ªè²¼ç°¿
            navigator.clipboard.writeText(syncCode).then(() => {
                alert('åŒæ­¥ç¢¼å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼åˆ†äº«çµ¦å…¶ä»–ç®¡ç†å“¡ä½¿ç”¨ã€‚');
            });
        }
        
        function importFromSyncCode() {
            const syncCode = document.getElementById('inputSyncCode').value.trim();
            if (!syncCode) {
                alert('è«‹è¼¸å…¥åŒæ­¥ç¢¼ï¼');
                return;
            }
            
            try {
                // è§£ç¢¼Base64
                const jsonString = decodeURIComponent(atob(syncCode));
                const syncData = JSON.parse(jsonString);
                
                // æª¢æŸ¥æ˜¯å¦éæœŸ
                if (new Date().getTime() > syncData.expiry) {
                    alert('åŒæ­¥ç¢¼å·²éæœŸï¼Œè«‹é‡æ–°ç”¢ç”Ÿï¼');
                    return;
                }
                
                // åˆä½µè¨‚å–®è³‡æ–™
                syncData.orders.forEach(newOrder => {
                    const existingIndex = orders.findIndex(o => o.id === newOrder.id);
                    if (existingIndex === -1) {
                        // æ–°å¢è¨‚å–®
                        orders.push(newOrder);
                    } else {
                        // æ›´æ–°ç¾æœ‰è¨‚å–®ï¼ˆä¿ç•™è¼ƒæ–°çš„è³‡æ–™ï¼‰
                        const existingOrder = orders[existingIndex];
                        const existingTime = new Date(existingOrder.updatedAt || 0);
                        const newTime = new Date(newOrder.updatedAt || 0);
                        
                        if (newTime > existingTime) {
                            orders[existingIndex] = newOrder;
                        }
                    }
                });
                
                // å„²å­˜ä¸¦æ›´æ–°
                saveOrders();
                refreshOrders();
                alert(`æˆåŠŸåŒæ­¥ ${syncData.orders.length} ç­†è¨‚å–®è³‡æ–™ï¼`);
                
                // æ¸…ç©ºè¼¸å…¥æ¡†
                document.getElementById('inputSyncCode').value = '';
                
            } catch (error) {
                alert('åŒæ­¥ç¢¼ç„¡æ•ˆæˆ–å·²æå£ï¼');
                console.error('åŒæ­¥éŒ¯èª¤:', error);
            }
        }
        
        // ============================
        // ç³»çµ±è¨­å®šåŠŸèƒ½
        // ============================
        
        function changeAdminPassword() {
            const newPassword = document.getElementById('newAdminPassword').value;
            if (!newPassword) {
                alert('è«‹è¼¸å…¥æ–°å¯†ç¢¼ï¼');
                return;
            }
            
            if (newPassword.length < 4) {
                alert('å¯†ç¢¼é•·åº¦è‡³å°‘éœ€è¦4å€‹å­—å…ƒï¼');
                return;
            }
            
            SYSTEM_CONFIG.ADMIN_PASSWORD = newPassword;
            localStorage.setItem('admin_password', newPassword);
            
            document.getElementById('newAdminPassword').value = '';
            alert('ç®¡ç†å“¡å¯†ç¢¼å·²æ›´æ”¹ï¼');
        }
        
        function saveNotificationSettings() {
            const enableNotifications = document.getElementById('enableNotifications').checked;
            SYSTEM_CONFIG.ENABLE_NOTIFICATIONS = enableNotifications;
            localStorage.setItem('enable_notifications', enableNotifications);
            
            if (enableNotifications) {
                startNotificationCheck();
            } else {
                stopNotificationCheck();
            }
            
            alert('é€šçŸ¥è¨­å®šå·²å„²å­˜ï¼');
        }
        
        function exportOrders() {
            const dataStr = JSON.stringify(orders, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `delta_orders_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            alert('è¨‚å–®è³‡æ–™å·²åŒ¯å‡ºï¼');
        }
        
        function backupData() {
            const backupData = {
                orders: orders,
                config: SYSTEM_CONFIG,
                backupTime: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `delta_backup_${new Date().getTime()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            alert('ç³»çµ±è³‡æ–™å·²å‚™ä»½ï¼');
        }
        
        function clearOldOrders() {
            if (!confirm('ç¢ºå®šè¦æ¸…é™¤30å¤©å‰çš„èˆŠè¨‚å–®å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ¢å¾©ï¼')) {
                return;
            }
            
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            const originalLength = orders.length;
            orders = orders.filter(order => {
                const orderDate = new Date(order.createdAt);
                return orderDate >= thirtyDaysAgo;
            });
            
            saveOrders();
            refreshOrders();
            
            alert(`å·²æ¸…é™¤ ${originalLength - orders.length} ç­†èˆŠè¨‚å–®ï¼`);
        }
        
        // ============================
        // é€šçŸ¥åŠŸèƒ½
        // ============================
        
        function startNotificationCheck() {
            if (notificationCheckInterval) {
                clearInterval(notificationCheckInterval);
            }
            
            if (SYSTEM_CONFIG.ENABLE_NOTIFICATIONS) {
                notificationCheckInterval = setInterval(() => {
                    checkNewOrders();
                }, 30000); // æ¯30ç§’æª¢æŸ¥ä¸€æ¬¡
            }
        }
        
        function stopNotificationCheck() {
            if (notificationCheckInterval) {
                clearInterval(notificationCheckInterval);
                notificationCheckInterval = null;
            }
        }
        
        function checkNewOrders() {
            const lastCheck = localStorage.getItem('last_order_check') || new Date(0).toISOString();
            const newOrders = orders.filter(o => new Date(o.createdAt) > new Date(lastCheck));
            
            if (newOrders.length > 0) {
                newOrders.forEach(order => {
                    showNewOrderNotification(order);
                });
                
                localStorage.setItem('last_order_check', new Date().toISOString());
            }
        }
        
        function showNewOrderNotification(order) {
            const notification = document.getElementById('orderNotification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = `è¨‚å–® ${order.id} - ${order.serviceName} (${order.amount}å…ƒ)`;
            notification.style.display = 'block';
            
            // æ’­æ”¾æç¤ºéŸ³
            playNotificationSound();
            
            // 10ç§’å¾Œè‡ªå‹•é—œé–‰
            setTimeout(() => {
                if (notification.style.display === 'block') {
                    notification.style.display = 'none';
                }
            }, 10000);
        }
        
        function closeNotification() {
            document.getElementById('orderNotification').style.display = 'none';
        }
        
        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                // å¦‚æœéŸ³æ•ˆæ’­æ”¾å¤±æ•—ï¼Œå¿½ç•¥éŒ¯èª¤
            }
        }
        
        // ============================
        // å·¥å…·å‡½æ•¸
        // ============================
        
        function formatDateTime(dateString) {
            if (!dateString) return 'æœªè¨­å®š';
            try {
                const date = new Date(dateString);
                return date.toLocaleString('zh-TW', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch (e) {
                return dateString;
            }
        }
        
        function getStatusText(status) {
            const statusMap = {
                [ORDER_STATUS.PENDING]: 'å¾…è™•ç†',
                [ORDER_STATUS.PAID]: 'å·²ä»˜æ¬¾',
                [ORDER_STATUS.PROCESSING]: 'è™•ç†ä¸­',
                [ORDER_STATUS.COMPLETED]: 'å·²å®Œæˆ',
                [ORDER_STATUS.CANCELLED]: 'å·²å–æ¶ˆ'
            };
            return statusMap[status] || status || 'æœªçŸ¥ç‹€æ…‹';
        }
        
        function getContactTypeText(type) {
            const typeMap = {
                'line': 'LINE',
                'discord': 'Discord',
                'wechat': 'å¾®ä¿¡'
            };
            return typeMap[type] || type || 'æœªæä¾›';
        }
        
        function getPaymentMethodText(method) {
            const methodMap = {
                'linepay': 'LINE Pay',
                'bank': 'éŠ€è¡Œè½‰å¸³',
                'crypto': 'åŠ å¯†è²¨å¹£',
                '711': 'è¶…å•†ä»£ç¢¼'
            };
            return methodMap[method] || method || 'æœªé¸æ“‡';
        }
        
        // ============================
        // æ¸¬è©¦è³‡æ–™
        // ============================
        
        function loadSampleOrders() {
            const sampleOrders = [
                {
                    id: 'DELTA-20240001',
                    gameId: 'éŠæˆ²ç©å®¶001',
                    contactType: 'line',
                    contactId: 'line001',
                    bookingTime: new Date(Date.now() + 86400000).toISOString(),
                    serviceName: 'åŸºç¤å–®',
                    amount: '500',
                    specialRequest: 'å¸Œæœ›æ™šä¸Šæ™‚æ®µ',
                    status: ORDER_STATUS.PENDING,
                    createdAt: new Date(Date.now() - 3600000).toISOString(),
                    updatedAt: new Date(Date.now() - 3600000).toISOString(),
                    paymentMethod: 'å¾…ç¢ºèª',
                    notes: 'æ–°å®¢æˆ¶ï¼Œé¦–æ¬¡é ç´„'
                },
                {
                    id: 'DELTA-20240002',
                    gameId: 'è³‡æ·±ç©å®¶',
                    contactType: 'discord',
                    contactId: 'discord_user',
                    bookingTime: new Date(Date.now() + 172800000).toISOString(),
                    serviceName: 'ç”·é™ªç©-æŠ€è¡“',
                    amount: '450',
                    specialRequest: 'éœ€è¦æŠ€è¡“æŒ‡å°',
                    status: ORDER_STATUS.PAID,
                    createdAt: new Date(Date.now() - 7200000).toISOString(),
                    updatedAt: new Date(Date.now() - 3600000).toISOString(),
                    paymentMethod: 'LINE Pay',
                    paymentTime: new Date(Date.now() - 3600000).toISOString(),
                    assignedTo: 'æ‰“æ‰‹é˜¿æ˜',
                    notes: 'å·²ä»˜æ¬¾ï¼Œç­‰å¾…æœå‹™'
                }
            ];
            
            orders = [...sampleOrders, ...orders];
            saveOrders();
        }
    </script>
</body>
</html>