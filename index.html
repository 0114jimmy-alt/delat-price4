<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RK工作室提供專業的三角洲行動戰術護航服務、娛樂陪玩服務及各種特色玩法。安全高效，專業團隊，保證遊戲體驗。">
    <meta name="keywords" content="三角洲行動,遊戲護航,陪玩服務,戰術支援,遊戲代練">
    <meta name="author" content="RK工作室">
    <title>RK 工作室</title>
    <style>
        /* ============================
           CSS 變數與重置樣式
           ============================ */
        :root {
            --primary-color: #ff6600;
            --secondary-color: #00ff9d;
            --accent-color: #0099ff;
            --danger-color: #ff6666;
            --warning-color: #ffcc00;
            --success-color: #00cc7d;
            --dark-bg: #0a0e14;
            --dark-card: rgba(22, 27, 37, 0.95);
            --border-color: #333945;
            --text-primary: #ffffff;
            --text-secondary: #8a9ba8;
            --text-muted: #666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a1f29 100%);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* ============================
           載入動畫
           ============================ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            transition: opacity 0.3s ease;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border-color);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ============================
           管理員登入按鈕
           ============================ */
        .admin-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 9999;
            box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

        .admin-btn:hover {
            background: #ff8800;
            transform: translateY(-2px);
        }

        /* ============================
           訂單通知浮窗
           ============================ */
        .order-notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #00ff9d, #00cc7d);
            color: var(--dark-bg);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 255, 157, 0.3);
            z-index: 9998;
            display: none;
            animation: slideIn 0.5s ease;
            max-width: 350px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-icon {
            font-size: 2rem;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .notification-info {
            flex: 1;
        }

        .notification-info h4 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
        }

        .notification-info p {
            margin: 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .close-notification {
            background: none;
            border: none;
            color: var(--dark-bg);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0 0 0 10px;
        }

        /* ============================
           管理後台樣式
           ============================ */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 20, 0.98);
            z-index: 10000;
            overflow-y: auto;
            padding: 20px;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
        }

        .admin-title {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .admin-login {
            max-width: 400px;
            margin: 50px auto;
            padding: 40px;
            background: rgba(22, 27, 37, 0.95);
            border-radius: 15px;
            border: 2px solid var(--primary-color);
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .login-input {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .login-btn {
            background: var(--secondary-color);
            color: var(--dark-bg);
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            background: #00cc7d;
        }

        /* ============================
           訂單管理面板
           ============================ */
        .orders-panel {
            display: none;
            max-width: 1400px;
            margin: 0 auto;
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .orders-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: rgba(22, 27, 37, 0.8);
            padding: 20px;
            border-radius: 10px;
            min-width: 200px;
            border: 2px solid var(--border-color);
        }

        .stat-number {
            font-size: 2.5rem;
            color: var(--secondary-color);
            font-weight: bold;
            text-align: center;
        }

        .stat-label {
            text-align: center;
            color: var(--text-secondary);
            margin-top: 10px;
        }

        .order-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: rgba(255, 102, 0, 0.2);
            border-color: var(--primary-color);
        }

        .filter-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* ============================
           訂單表格
           ============================ */
        .orders-table {
            width: 100%;
            background: rgba(22, 27, 37, 0.8);
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid var(--border-color);
            margin-bottom: 30px;
        }

        .table-header {
            display: grid;
            grid-template-columns: 100px 1fr 150px 150px 150px 120px 120px;
            background: rgba(255, 102, 0, 0.2);
            padding: 15px;
            border-bottom: 2px solid var(--primary-color);
            font-weight: bold;
        }

        .table-row {
            display: grid;
            grid-template-columns: 100px 1fr 150px 150px 150px 120px 120px;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            align-items: center;
        }

        .table-row:hover {
            background: rgba(255, 102, 0, 0.05);
        }

        .order-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-align: center;
        }

        .status-pending { background: #ff9900; color: #000; }
        .status-paid { background: var(--secondary-color); color: #000; }
        .status-processing { background: var(--accent-color); color: #fff; }
        .status-completed { background: #6666ff; color: #fff; }
        .status-cancelled { background: var(--danger-color); color: #fff; }

        .order-actions {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .action-btn.view { background: var(--accent-color); color: white; }
        .action-btn.edit { background: var(--warning-color); color: #000; }
        .action-btn.delete { background: var(--danger-color); color: white; }

        .action-btn:hover {
            transform: scale(1.05);
        }

        /* ============================
           訂單詳情彈窗
           ============================ */
        .order-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10001;
            padding: 20px;
            overflow-y: auto;
        }

        .order-detail-modal.active {
            display: block;
        }

        .order-detail-content {
            max-width: 800px;
            margin: 50px auto;
            background: rgba(22, 27, 37, 0.95);
            border-radius: 15px;
            padding: 40px;
            border: 2px solid var(--primary-color);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .order-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .detail-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-section h4 {
            color: var(--warning-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .detail-label {
            color: var(--text-secondary);
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: bold;
        }

        /* ============================
           系統設定
           ============================ */
        .system-settings {
            margin-top: 40px;
            padding: 30px;
            background: rgba(22, 27, 37, 0.8);
            border-radius: 15px;
            border: 2px solid var(--accent-color);
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .setting-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
        }

        /* ============================
           資料同步面板
           ============================ */
        .sync-panel {
            background: rgba(0, 255, 157, 0.1);
            border: 2px solid var(--secondary-color);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .sync-code-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            word-break: break-all;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        /* ============================
           導航欄
           ============================ */
        .navbar {
            background: rgba(22, 27, 37, 0.95);
            border-bottom: 3px solid var(--primary-color);
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
            text-decoration: none;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-weight: bold;
            cursor: pointer;
        }

        .nav-link:hover {
            color: var(--warning-color);
            background: rgba(255, 102, 0, 0.1);
        }

        .nav-link.active {
            color: var(--text-primary);
            background: var(--primary-color);
        }

        .book-now-btn {
            background: var(--secondary-color);
            color: var(--dark-bg);
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }

        .book-now-btn:hover {
            background: #00cc7d;
            transform: scale(1.05);
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 5px;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--primary-color);
            margin: 3px 0;
            transition: 0.3s;
        }

        /* ============================
           主容器
           ============================ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* ============================
           英雄區
           ============================ */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(10, 14, 20, 0.9), rgba(26, 31, 41, 0.9));
            border-radius: 15px;
            margin-bottom: 40px;
            border: 2px solid var(--primary-color);
        }

        .hero-title {
            font-size: 3.5rem;
            background: linear-gradient(90deg, var(--primary-color), #ffaa00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 0 15px rgba(255, 102, 0, 0.3);
        }

        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 1.3rem;
            margin-bottom: 25px;
        }

        /* ============================
           服務網格與卡片樣式
           ============================ */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .service-card {
            background: rgba(22, 27, 37, 0.8);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .service-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 102, 0, 0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .card-icon {
            font-size: 2.5rem;
        }

        .card-title {
            color: var(--warning-color);
            font-size: 1.5rem;
            margin: 0;
        }

        .book-btn {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            width: 100%;
        }

        .book-btn:hover {
            background: #ff8800;
            transform: translateY(-2px);
        }

        /* ============================
           價格表格
           ============================ */
        .price-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .price-table th {
            background: rgba(255, 102, 0, 0.2);
            color: var(--warning-color);
            padding: 15px;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        .price-table td {
            padding: 15px;
            border: 1px solid var(--border-color);
            color: #e0e0e0;
        }

        .price-number {
            color: var(--secondary-color);
            font-weight: bold;
            font-size: 1.3rem;
        }

        .price-unit {
            color: #66b3ff;
            font-weight: bold;
        }

        /* ============================
           分頁內容
           ============================ */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ============================
           付款頁面樣式
           ============================ */
        .payment-section {
            background: rgba(22, 27, 37, 0.95);
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
            border: 2px solid var(--secondary-color);
        }

        .payment-title {
            color: var(--secondary-color);
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .payment-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }

        .payment-steps:before {
            content: '';
            position: absolute;
            top: 25px;
            left: 10%;
            right: 10%;
            height: 3px;
            background: var(--border-color);
            z-index: 1;
        }

        .step {
            text-align: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: var(--border-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-secondary);
        }

        .step.active .step-number {
            background: var(--secondary-color);
            color: var(--dark-bg);
        }

        .step.completed .step-number {
            background: #00cc7d;
            color: white;
        }

        .step-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .step.active .step-text {
            color: var(--secondary-color);
        }

        /* ============================
           已選擇服務顯示
           ============================ */
        .selected-service-display {
            background: rgba(255, 102, 0, 0.1);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .selected-service-display.active {
            display: block;
        }

        .selected-service-title {
            color: var(--warning-color);
            font-size: 1.4rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .selected-service-title:before {
            content: "✓";
            background: var(--secondary-color);
            color: var(--dark-bg);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .selected-service-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .service-info {
            flex: 1;
        }

        .service-price {
            font-size: 1.8rem;
            color: var(--secondary-color);
            font-weight: bold;
        }

        .change-service-btn {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .change-service-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* ============================
           訂單摘要
           ============================ */
        .order-summary {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            padding: 20px 0;
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        /* ============================
           付款方式
           ============================ */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .payment-method {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method:hover {
            border-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        .payment-method.selected {
            border-color: var(--secondary-color);
            background: rgba(0, 255, 157, 0.1);
        }

        .payment-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        /* ============================
           表單樣式
           ============================ */
        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #66b3ff;
            font-weight: bold;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            background: rgba(0, 255, 157, 0.05);
        }

        .form-select {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            cursor: pointer;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .form-textarea {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
        }

        /* ============================
           按鈕樣式
           ============================ */
        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            width: 100%;
            text-align: center;
        }

        .btn:hover {
            background: #ff8800;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--border-color);
        }

        .btn-secondary:hover {
            background: #444a55;
        }

        .btn-success {
            background: var(--secondary-color);
            color: var(--dark-bg);
        }

        .btn-success:hover {
            background: #00cc7d;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        /* ============================
           確認頁面
           ============================ */
        .confirmation-box {
            text-align: center;
            padding: 50px;
            background: rgba(0, 255, 157, 0.1);
            border-radius: 15px;
            border: 2px solid var(--secondary-color);
        }

        .confirmation-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }

        .confirmation-title {
            color: var(--secondary-color);
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .confirmation-text {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 1.1rem;
        }

        .order-id {
            color: var(--warning-color);
            font-size: 1.5rem;
            margin: 20px 0;
            font-weight: bold;
        }

        /* ============================
           聯繫區
           ============================ */
        .contact-section {
            background: rgba(0, 150, 255, 0.1);
            border-radius: 15px;
            padding: 40px;
            margin-top: 50px;
            text-align: center;
            border: 2px solid var(--accent-color);
        }

        .contact-title {
            color: #66b3ff;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .contact-info {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin: 15px 0;
        }

        .contact-qr {
            max-width: 200px;
            margin: 20px auto;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }

        /* ============================
           頁腳樣式
           ============================ */
        .footer {
            text-align: center;
            padding: 30px 20px;
            background: rgba(22, 27, 37, 0.95);
            border-top: 2px solid var(--border-color);
            color: var(--text-secondary);
            margin-top: 50px;
        }

        /* ============================
           響應式設計
           ============================ */
        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
                padding: 10px 15px;
            }
            
            .logo {
                font-size: 1.5rem;
                order: 1;
            }
            
            .menu-toggle {
                display: flex;
                order: 2;
            }
            
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                order: 3;
                margin-top: 15px;
                background: rgba(22, 27, 37, 0.95);
                padding: 15px;
                border-radius: 10px;
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-link {
                width: 100%;
                text-align: center;
                padding: 12px;
                margin: 5px 0;
            }
            
            .book-now-btn {
                width: 100%;
                text-align: center;
                margin-top: 10px;
            }
            
            .hero {
                padding: 40px 15px;
                margin: 15px 0;
            }
            
            .hero-title {
                font-size: 2.2rem;
                line-height: 1.3;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .container {
                padding: 15px;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .service-card {
                padding: 20px;
            }
            
            .card-title {
                font-size: 1.5rem;
            }
            
            .payment-section {
                padding: 25px 15px;
                margin: 20px 0;
            }
            
            .payment-title {
                font-size: 1.8rem;
            }
            
            .payment-steps {
                flex-direction: column;
                gap: 30px;
            }
            
            .payment-steps:before {
                display: none;
            }
            
            .step {
                text-align: left;
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            .step-number {
                margin: 0;
                flex-shrink: 0;
            }
            
            .selected-service-display {
                padding: 15px;
                margin-bottom: 20px;
            }
            
            .selected-service-details {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .service-price {
                font-size: 1.5rem;
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .btn-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .confirmation-box {
                padding: 30px 15px;
            }
            
            .confirmation-title {
                font-size: 1.6rem;
            }
            
            .contact-section {
                padding: 25px 15px;
                margin-top: 30px;
            }
            
            .contact-title {
                font-size: 1.6rem;
            }
            
            .contact-info {
                font-size: 1.1rem;
            }
            
            /* 管理後台響應式 */
            .table-header {
                display: none;
            }
            
            .table-row {
                display: flex;
                flex-direction: column;
                gap: 10px;
                padding: 20px;
            }
            
            .table-row > div {
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .order-actions {
                width: 100%;
                justify-content: center;
                margin-top: 15px;
            }
            
            .orders-stats {
                justify-content: center;
            }
            
            .stat-card {
                min-width: 150px;
            }
            
            .admin-title {
                font-size: 2rem;
            }
            
            .admin-login {
                padding: 20px;
                margin: 20px auto;
            }
        }

        /* ============================
           行動裝置優化
           ============================ */
        @media (max-width: 480px) {
            .hero-title {
                font-size: 1.8rem;
            }
            
            .service-card {
                padding: 20px 15px;
            }
            
            .payment-method {
                padding: 15px;
            }
            
            .order-detail-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- 載入動畫 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">系統載入中...</div>
    </div>

    <!-- 管理員登入按鈕 -->
    <button class="admin-btn" onclick="openAdminPanel()">
        <span>🔧</span>
        <span>管理後台</span>
    </button>

    <!-- 訂單通知浮窗 -->
    <div class="order-notification" id="orderNotification">
        <div class="notification-content">
            <div class="notification-icon">🆕</div>
            <div class="notification-info">
                <h4>新訂單通知</h4>
                <p id="notificationText">有新的訂單需要處理！</p>
            </div>
            <button class="close-notification" onclick="closeNotification()">×</button>
        </div>
    </div>

    <!-- 導航欄 -->
    <nav class="navbar">
        <a href="#" class="logo" onclick="showTab('home')">RK 工作室</a>
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="nav-links" id="navLinks">
            <a href="#" class="nav-link active" onclick="showTab('home')">首頁</a>
            <a href="#" class="nav-link" onclick="showTab('escort')">護航服務</a>
            <a href="#" class="nav-link" onclick="showTab('betting')">賭約單</a>
            <a href="#" class="nav-link" onclick="showTab('entertainment')">娛樂玩法</a>
            <a href="#" class="nav-link" onclick="showTab('peipei')">娛樂陪玩</a>
            <a href="#" class="nav-link" onclick="showTab('rules')">規則條款</a>
            <a href="#" class="nav-link book-now-btn" onclick="showTab('payment')">立即預約</a>
        </div>
    </nav>

    <!-- 主內容區 -->
    <div class="container">
        <!-- 首頁 -->
        <div class="tab-content active" id="home">
            <div class="hero">
                <h1 class="hero-title">RK 工作室</h1>
                <p class="hero-subtitle">頂尖打手團隊 · 專業護航服務 · 安全高效保障</p>
                <div style="margin-top: 30px;">
                    <button onclick="showTab('escort')" style="background: var(--primary-color); color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin: 0 10px;">
                        查看護航服務
                    </button>
                    <button onclick="showTab('payment')" style="background: var(--secondary-color); color: var(--dark-bg); border: none; padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin: 0 10px; font-weight: bold;">
                        立即預約付款
                    </button>
                </div>
            </div>

            <!-- 服務簡介 -->
            <div class="services-grid">
                <div class="service-card">
                    <div class="card-header">
                        <div class="card-icon">🛡️</div>
                        <h2 class="card-title">戰術護航服務</h2>
                    </div>
                    <p>專業打手團隊，我們提供最可靠的護航服務，保證您的遊戲物資安全。</p>
                    <ul style="margin-top: 15px; padding-left: 20px; color: var(--text-secondary);">
                        <li>基礎單：500起，保底600w</li>
                        <li>體驗單：200起，保底400w</li>
                        <li>航天賭約單：高風險高回報</li>
                    </ul>
                    <button onclick="showTab('escort')" class="book-btn">
                        了解更多
                    </button>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="card-icon">🎮</div>
                        <h2 class="card-title">娛樂陪玩服務</h2>
                    </div>
                    <p>專業陪玩師團隊，提供技術指導或輕鬆娛樂。男女陪玩師可選，讓您的遊戲體驗更加豐富有趣。</p>
                    <ul style="margin-top: 15px; padding-left: 20px; color: var(--text-secondary);">
                        <li>男陪玩：娛樂250/小時，技術450/小時</li>
                        <li>女陪玩：娛樂350/小時，技術550/小時</li>
                        <li>時長套餐優惠，新客專屬福利</li>
                    </ul>
                    <button onclick="showTab('peipei')" class="book-btn">
                        了解更多
                    </button>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="card-icon">⚡</div>
                        <h2 class="card-title">特色娛樂玩法</h2>
                    </div>
                    <p>多種趣味玩法，讓遊戲更加精彩。牛角單、自力根生等特殊模式，挑戰極限，享受遊戲樂趣。</p>
                    <ul style="margin-top: 15px; padding-left: 20px; color: var(--text-secondary);">
                        <li>牛角單：1088起，保底800w</li>
                        <li>自力根生：1000起，初始保底500w</li>
                        <li>規則彈性，可客製化需求</li>
                    </ul>
                    <button onclick="showTab('entertainment')" class="book-btn">
                        了解更多
                    </button>
                </div>
            </div>
        </div>

        <!-- 護航服務頁 -->
        <div class="tab-content" id="escort">
            <h1 style="color: var(--warning-color); font-size: 2.5rem; margin-bottom: 30px;">戰術護航服務</h1>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="card-header">
                        <h2 class="card-title">基礎單</h2>
                    </div>
                    <table class="price-table">
                        <tr>
                            <th>價格</th>
                            <th>保障內容</th>
                            <th>預約</th>
                        </tr>
                        <tr>
                            <td class="price-number">500</td>
                            <td><span class="price-unit">保底 600w</span></td>
                            <td><button onclick="selectService('基礎單-500', '500', '保底 600w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">800</td>
                            <td><span class="price-unit">保底 900w</span></td>
                            <td><button onclick="selectService('基礎單-800', '800', '保底 900w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">1000</td>
                            <td><span class="price-unit">保底 1300w</span></td>
                            <td><button onclick="selectService('基礎單-1000', '1000', '保底 1300w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">2000</td>
                            <td><span class="price-unit">保底 2300w</span></td>
                            <td><button onclick="selectService('基礎單-2000', '2000', '保底 2300w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">8000</td>
                            <td><span class="price-unit">保底 8600w</span></td>
                            <td><button onclick="selectService('基礎單-8000', '8000', '保底 8600w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">10000</td>
                            <td><span class="price-unit">保底 11888w</span></td>
                            <td><button onclick="selectService('基礎單-10000', '10000', '保底 11888w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                    </table>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(255, 204, 0, 0.1); border-radius: 8px;">
                        <strong>※ 炸單補償：</strong> 失敗補償 +100w (上限1000w)
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <h2 class="card-title">體驗單</h2>
                    </div>
                    <table class="price-table">
                        <tr>
                            <th>價格</th>
                            <th>保障內容</th>
                            <th>預約</th>
                        </tr>
                        <tr>
                            <td class="price-number">200</td>
                            <td><span class="price-unit">保底 400w</span></td>
                            <td><button onclick="selectService('體驗單-200', '200', '保底 400w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">600</td>
                            <td><span class="price-unit">保底 750w</span></td>
                            <td><button onclick="selectService('體驗單-600', '600', '保底 750w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                        <tr>
                            <td class="price-number">1500</td>
                            <td><span class="price-unit">保底 1700w</span></td>
                            <td><button onclick="selectService('體驗單-1500', '1500', '保底 1700w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                        </tr>
                    </table>
                    <div style="margin-top: 40px; padding: 15px; background: rgba(0, 150, 255, 0.1); border-radius: 8px;">
                        <strong>📌 進階服務：</strong><br>
                        • 航天絕密賭約單<br>
                        • 娛樂玩法 (牛角單/自力根生)<br>
                        • 完整規則與條款
                    </div>
                </div>
            </div>
        </div>

        <!-- 賭約單頁 -->
        <div class="tab-content" id="betting">
            <h1 style="color: #ff66ff; font-size: 2.5rem; margin-bottom: 30px;">航天絕密賭約單</h1>
            <p style="color: var(--text-secondary); margin-bottom: 30px; font-size: 1.1rem;">高風險高回報 | 限單局帶出金額 | 玩的就是心跳</p>
            
            <div class="service-card">
                <div class="card-header">
                    <h2 class="card-title">賭約單 - 單局挑戰</h2>
                </div>
                <table class="price-table">
                    <tr>
                        <th>價格</th>
                        <th>挑戰內容</th>
                        <th>預約</th>
                    </tr>
                    <tr>
                        <td class="price-number" style="color: #ff66ff;">1000</td>
                        <td><span class="price-unit">單局沒有 588w 不結單</span></td>
                        <td><button onclick="selectService('賭約單-1000', '1000', '單局沒有 588w 不結單')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                    </tr>
                    <tr>
                        <td class="price-number" style="color: #ff66ff;">1500</td>
                        <td><span class="price-unit">單局沒有 688w 不結單</span></td>
                        <td><button onclick="selectService('賭約單-1500', '1500', '單局沒有 688w 不結單')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                    </tr>
                    <tr>
                        <td class="price-number" style="color: #ff66ff;">2000</td>
                        <td><span class="price-unit">單局沒有 799w 不結單</span></td>
                        <td><button onclick="selectService('賭約單-2000', '2000', '單局沒有 799w 不結單')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                    </tr>
                    <tr>
                        <td class="price-number" style="color: #ff66ff;">2500</td>
                        <td><span class="price-unit">單局沒有 888w 不結單</span></td>
                        <td><button onclick="selectService('賭約單-2500', '2500', '單局沒有 888w 不結單')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                    </tr>
                    <tr>
                        <td class="price-number" style="color: #ff66ff;">3500</td>
                        <td><span class="price-unit">單局沒有 1288w 不結單</span></td>
                        <td><button onclick="selectService('賭約單-3500', '3500', '單局沒有 1288w 不結單')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                    </tr>
                    <tr>
                        <td class="price-number" style="color: #ff66ff;">5500</td>
                        <td><span class="price-unit">單局沒有 1488w 不結單</span></td>
                        <td><button onclick="selectService('賭約單-5500', '5500', '單局沒有 1488w 不結單')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                    </tr>
                </table>
            </div>

            <div class="service-card" style="margin-top: 30px;">
                <div class="card-header">
                    <h2 class="card-title">稀有目標保底</h2>
                </div>
                <div class="services-grid">
                    <div>
                        <table class="price-table">
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">588</td>
                                <td><span class="price-unit">沒出鍋保 688w</span></td>
                                <td><button onclick="selectService('稀有目標-588', '588', '沒出鍋保 688w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">1088</td>
                                <td><span class="price-unit">必出鍋</span></td>
                                <td><button onclick="selectService('稀有目標-1088', '1088', '必出鍋')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">1888</td>
                                <td><span class="price-unit">沒出油保 2000w</span></td>
                                <td><button onclick="selectService('稀有目標-1888', '1888', '沒出油保 2000w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">4888</td>
                                <td><span class="price-unit">必出油</span></td>
                                <td><button onclick="selectService('稀有目標-4888', '4888', '必出油')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <table class="price-table">
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">5200</td>
                                <td><span class="price-unit">沒出心保 6888w</span></td>
                                <td><button onclick="selectService('稀有目標-5200', '5200', '沒出心保 6888w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">40000</td>
                                <td><span class="price-unit">必出心</span></td>
                                <td><button onclick="selectService('稀有目標-40000', '40000', '必出心')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">90000</td>
                                <td><span class="price-unit">沒出淚保 10888w</span></td>
                                <td><button onclick="selectService('稀有目標-90000', '90000', '沒出心保 10888w')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                            <tr>
                                <td class="price-number" style="color: #ff66ff;">130000</td>
                                <td><span class="price-unit">必出淚</span></td>
                                <td><button onclick="selectService('稀有目標-130000', '130000', '必出淚保')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem;">預約</button></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: rgba(255, 102, 0, 0.1); border-radius: 10px;">
                <strong>⚠️ 賭約規則：</strong> 下訂後不可反悔或故意卡保底（如藏物品/丟槍械），發現直接結單。賭約內容及條約不可更動及耍賴，玩的就是心跳，得失心重者勿下單。
            </div>
        </div>

        <!-- 娛樂玩法頁 -->
        <div class="tab-content" id="entertainment">
            <h1 style="color: #00ffff; font-size: 2.5rem; margin-bottom: 30px;">娛樂玩法</h1>
            <p style="color: var(--text-secondary); margin-bottom: 30px; font-size: 1.1rem;">趣味挑戰 | 客製化服務 | 特殊目標</p>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="card-header">
                        <h2 class="card-title">牛角單</h2>
                    </div>
                    <div style="text-align: center; padding: 30px;">
                        <div style="font-size: 2.5rem; color: #00ffff; font-weight: bold; margin-bottom: 20px;">1088</div>
                        <div style="font-size: 1.5rem; color: #66b3ff; margin-bottom: 20px;">保底 800w</div>
                        <div style="padding: 15px; background: rgba(0, 200, 200, 0.1); border-radius: 8px; margin-top: 20px;">
                            <strong>※ 額外加成：</strong> 一個牛角額外加 50w (無上限)
                        </div>
                    </div>
                    <button onclick="selectService('牛角單-1088', '1088', '保底 800w')" class="book-btn" style="display: block; margin: 20px auto 0; width: 200px;">
                        立即預約
                    </button>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <h2 class="card-title">自力根生</h2>
                    </div>
                    <div style="text-align: center; padding: 30px;">
                        <div style="font-size: 2.5rem; color: #00ffff; font-weight: bold; margin-bottom: 20px;">1000</div>
                        <div style="font-size: 1.5rem; color: #66b3ff; margin-bottom: 20px;">初始保底 500w</div>
                        <div style="padding: 15px; background: rgba(0, 200, 200, 0.1); border-radius: 8px; margin-top: 20px;">
                            <strong>※ 服務內容：</strong><br>
                            1. 打手幫忙起裝，裝備會帶出去<br>
                            2. 一個人加 100w，下局打手會幫忙打到金額
                        </div>
                    </div>
                    <button onclick="selectService('自力根生-1000', '1000', '初始保底 500w')" class="book-btn" style="display: block; margin: 20px auto 0; width: 200px;">
                        立即預約
                    </button>
                </div>
            </div>
        </div>

        <!-- 娛樂陪玩頁 -->
        <div class="tab-content" id="peipei">
            <h1 style="color: var(--warning-color); font-size: 2.5rem; margin-bottom: 30px;">娛樂陪玩服務</h1>
            <p style="color: var(--text-secondary); margin-bottom: 30px; font-size: 1.1rem;">專業陪玩師團隊 · 男女可選 · 技術娛樂兼備</p>
            
            <div class="service-card">
                <h3 style="color: var(--text-primary); margin-bottom: 20px; font-size: 1.3rem;">基礎陪玩服務</h3>
                <table class="price-table">
                    <tr>
                        <th>陪玩師</th>
                        <th>娛樂陪玩</th>
                        <th>技術陪玩</th>
                    </tr>
                    <tr>
                        <td style="background: rgba(0, 150, 255, 0.1);"><strong>👨 男陪玩師</strong></td>
                        <td>
                            <div class="price-number">250/小時</div>
                            <div style="color: #ff9999; font-size: 0.9rem;">輕鬆聊天娛樂局</div>
                            <button onclick="selectService('男陪玩-娛樂', '250', '每小時')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem; margin-top: 10px;">預約</button>
                        </td>
                        <td>
                            <div class="price-number">450/小時</div>
                            <div style="color: #ff9999; font-size: 0.9rem;">戰術指導技術局</div>
                            <button onclick="selectService('男陪玩-技術', '450', '每小時')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem; margin-top: 10px;">預約</button>
                        </td>
                    </tr>
                    <tr>
                        <td style="background: rgba(255, 102, 182, 0.1);"><strong>👩 女陪玩師</strong></td>
                        <td>
                            <div class="price-number">350/小時</div>
                            <div style="color: #ff9999; font-size: 0.9rem;">甜蜜互動娛樂局</div>
                            <button onclick="selectService('女陪玩-娛樂', '350', '每小時')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem; margin-top: 10px;">預約</button>
                        </td>
                        <td>
                            <div class="price-number">550/小時</div>
                            <div style="color: #ff9999; font-size: 0.9rem;">專業指導技術局</div>
                            <button onclick="selectService('女陪玩-技術', '550', '每小時')" class="book-btn" style="padding: 8px 15px; font-size: 0.9rem; margin-top: 10px;">預約</button>
                        </td>
                    </tr>
                </table>
                <div style="text-align: center; color: #ff9999; margin: 20px 0; padding: 15px; background: rgba(255, 50, 50, 0.1); border-radius: 8px;">
                    ⚠️ 注意：以上服務皆不保證擊殺數（不包得吃）
                </div>
            </div>

            <!-- 時長優惠 -->
            <div style="margin-top: 50px; padding: 40px; background: rgba(22, 27, 37, 0.95); border-radius: 15px; border: 2px solid var(--warning-color);">
                <h2 style="color: var(--warning-color); font-size: 2.2rem; margin-bottom: 30px; text-align: center;">⏰ 時長優惠方案</h2>
                <div class="services-grid">
                    <div class="service-card">
                        <h3 style="color: var(--warning-color);">男陪玩 3小時套餐</h3>
                        <div class="order-item">
                            <span>娛樂套餐</span>
                            <span class="price-number">700元</span>
                        </div>
                        <div class="order-item">
                            <span>技術套餐</span>
                            <span class="price-number">1200元</span>
                        </div>
                        <button onclick="selectService('男陪玩3小時套餐-娛樂', '700', '娛樂套餐')" class="book-btn" style="margin-top: 15px;">選擇娛樂套餐</button>
                        <button onclick="selectService('男陪玩3小時套餐-技術', '1200', '技術套餐')" class="book-btn" style="margin-top: 10px; background: var(--border-color);">選擇技術套餐</button>
                    </div>
                    
                    <div class="service-card">
                        <h3 style="color: var(--warning-color);">男陪玩 5小時套餐</h3>
                        <div class="order-item">
                            <span>娛樂套餐</span>
                            <span class="price-number">1100元</span>
                        </div>
                        <div class="order-item">
                            <span>技術套餐</span>
                            <span class="price-number">2000元</span>
                        </div>
                        <button onclick="selectService('男陪玩5小時套餐-娛樂', '1100', '娛樂套餐')" class="book-btn" style="margin-top: 15px;">選擇娛樂套餐</button>
                        <button onclick="selectService('男陪玩5小時套餐-技術', '2000', '技術套餐')" class="book-btn" style="margin-top: 10px; background: var(--border-color);">選擇技術套餐</button>
                    </div>
                    
                    <div class="service-card">
                        <h3 style="color: var(--warning-color);">女陪玩 3小時套餐</h3>
                        <div class="order-item">
                            <span>娛樂套餐</span>
                            <span class="price-number">1000元</span>
                        </div>
                        <div class="order-item">
                            <span>技術套餐</span>
                            <span class="price-number">1500元</span>
                        </div>
                        <button onclick="selectService('女陪玩3小時套餐-娛樂', '1000', '娛樂套餐')" class="book-btn" style="margin-top: 15px;">選擇娛樂套餐</button>
                        <button onclick="selectService('女陪玩3小時套餐-技術', '1500', '技術套餐')" class="book-btn" style="margin-top: 10px; background: var(--border-color);">選擇技術套餐</button>
                    </div>
                    
                    <div class="service-card">
                        <h3 style="color: var(--warning-color);">女陪玩 5小時套餐</h3>
                        <div class="order-item">
                            <span>娛樂套餐</span>
                            <span class="price-number">1600元</span>
                        </div>
                        <div class="order-item">
                            <span>技術套餐</span>
                            <span class="price-number">2500元</span>
                        </div>
                        <button onclick="selectService('女陪玩5小時套餐-娛樂', '1600', '娛樂套餐')" class="book-btn" style="margin-top: 15px;">選擇娛樂套餐</button>
                        <button onclick="selectService('女陪玩5小時套餐-技術', '2500', '技術套餐')" class="book-btn" style="margin-top: 10px; background: var(--border-color);">選擇技術套餐</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 規則條款頁 -->
        <div class="tab-content" id="rules">
            <h1 style="color: var(--text-primary); font-size: 2.5rem; margin-bottom: 30px;">服務規則條款</h1>
            <p style="color: var(--text-secondary); margin-bottom: 30px; font-size: 1.1rem;">請仔細閱讀並遵守以下規則</p>
            
            <div class="service-card">
                <div class="card-header">
                    <h2 class="card-title">基本規則</h2>
                </div>
                <ul style="padding-left: 20px; list-style-type: none;">
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">下單確認：</span> 
                        <span style="color: var(--text-secondary);">下單前請確認需求及價格，下單後10分鐘內可取消，避免臨時改單或爭議。</span>
                    </li>
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">錄影存證：</span> 
                        <span style="color: var(--text-secondary);">護航期間打手全程錄影，建議老闆也錄屏，發生爭議可以確保自身權益。</span>
                    </li>
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">配合指令：</span> 
                        <span style="color: var(--text-secondary);">任務開始請配合打手行動，如不配合或是干擾打手，打手有權直接結單。</span>
                    </li>
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">聯繫規範：</span> 
                        <span style="color: var(--text-secondary);">結束護航請勿遊戲內私下索要打手聯絡方式和私下談價格。</span>
                    </li>
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">官方渠道：</span> 
                        <span style="color: var(--text-secondary);">所有訂單一律透過官方 LINE，其他渠道恕不接待。</span>
                    </li>
                </ul>
            </div>

            <div class="service-card" style="margin-top: 30px;">
                <div class="card-header">
                    <h2 class="card-title">賭約單特別規則</h2>
                </div>
                <ul style="padding-left: 20px; list-style-type: none;">
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">不可反悔：</span> 
                        <span style="color: var(--text-secondary);">賭約單下訂後不可反悔或故意卡保底，例如藏物品或丟槍械，發現直接結單。</span>
                    </li>
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">合約精神：</span> 
                        <span style="color: var(--text-secondary);">賭約內容及條約不可更動及耍賴，玩的就是心跳，得失心重者勿下單。</span>
                    </li>
                    <li style="margin-bottom: 15px; padding-left: 20px; position: relative;">
                        <span style="color: var(--warning-color); font-weight: bold;">禁止情勒：</span> 
                        <span style="color: var(--text-secondary);">不可私下聯繫打手情勒求吃多點，一切按約定執行。</span>
                    </li>
                </ul>
            </div>

            <div class="service-card" style="margin-top: 30px;">
                <div class="card-header">
                    <h2 class="card-title">重要提醒</h2>
                </div>
                <div style="padding: 25px; background: rgba(255, 50, 50, 0.1); border-radius: 10px;">
                    <h3 style="color: #ff6666; margin-bottom: 15px;">⚠️ 風險告知：</h3>
                    <div style="color: #ffaaaa; line-height: 1.8;">
                        1. 遊戲帳號安全由老闆自行負責<br>
                        2. 服務過程中如遇遊戲官方封號，責任自負<br>
                        3. 請勿將帳號密碼交給非官方人員<br>
                        4. 交易請透過官方渠道，避免詐騙
                    </div>
                </div>
            </div>
        </div>

        <!-- 付款頁面 -->
        <div class="tab-content" id="payment">
            <div class="payment-section">
                <!-- 已選擇服務顯示區 -->
                <div class="selected-service-display" id="selectedServiceDisplay">
                    <div class="selected-service-title">已選擇服務</div>
                    <div class="selected-service-details">
                        <div class="service-info">
                            <div id="displayServiceName">尚未選擇服務</div>
                            <div id="displayServiceDescription" style="color: var(--text-secondary); font-size: 0.9rem;"></div>
                        </div>
                        <div class="service-price" id="displayServicePrice">0元</div>
                        <button class="change-service-btn" onclick="clearServiceSelection()">更換服務</button>
                    </div>
                </div>

                <!-- 付款步驟 -->
                <div class="payment-steps">
                    <div class="step active" id="step1">
                        <div class="step-number">1</div>
                        <div class="step-text">選擇服務</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-number">2</div>
                        <div class="step-text">填寫資料</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-number">3</div>
                        <div class="step-text">選擇付款</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-number">4</div>
                        <div class="step-text">確認訂單</div>
                    </div>
                </div>

                <!-- 步驟1：選擇服務 -->
                <div id="payment-step1" class="payment-step active">
                    <h2 class="payment-title">選擇服務項目</h2>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 30px;">請選擇您要預約的服務項目</p>
                    
                    <div class="services-grid">
                        <div class="service-card" onclick="selectService('基礎單-500', '500', '保底 600w')">
                            <h3 style="color: var(--warning-color);">基礎單</h3>
                            <div class="order-item">
                                <span>500元方案</span>
                                <span class="price-number">500元</span>
                            </div>
                            <div style="color: #66b3ff; margin-top: 10px;">保底 600w</div>
                        </div>
                        
                        <div class="service-card" onclick="selectService('體驗單-200', '200', '保底 400w')">
                            <h3 style="color: var(--warning-color);">體驗單</h3>
                            <div class="order-item">
                                <span>200元方案</span>
                                <span class="price-number">200元</span>
                            </div>
                            <div style="color: #66b3ff; margin-top: 10px;">保底 400w</div>
                        </div>
                        
                        <div class="service-card" onclick="selectService('男陪玩-娛樂', '250', '每小時')">
                            <h3 style="color: #00ffff;">男陪玩師</h3>
                            <div class="order-item">
                                <span>娛樂陪玩</span>
                                <span class="price-number">250元/小時</span>
                            </div>
                            <div style="color: #66b3ff; margin-top: 10px;">輕鬆聊天娛樂局</div>
                        </div>
                        
                        <div class="service-card" onclick="selectService('女陪玩-娛樂', '350', '每小時')">
                            <h3 style="color: #ff66ff;">女陪玩師</h3>
                            <div class="order-item">
                                <span>娛樂陪玩</span>
                                <span class="price-number">350元/小時</span>
                            </div>
                            <div style="color: #66b3ff; margin-top: 10px;">甜蜜互動娛樂局</div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button onclick="nextStep()" class="btn btn-success">下一步：填寫資料</button>
                    </div>
                </div>

                <!-- 步驟2：填寫資料 -->
                <div id="payment-step2" class="payment-step" style="display: none;">
                    <h2 class="payment-title">填寫預約資料</h2>
                    
                    <div class="order-summary">
                        <h3 style="color: var(--warning-color); margin-bottom: 15px;">訂單摘要</h3>
                        <div class="order-item">
                            <span id="selected-service-name">尚未選擇服務</span>
                            <span id="selected-service-price">0元</span>
                        </div>
                        <div class="order-total">
                            <span>總金額</span>
                            <span id="order-total">0元</span>
                        </div>
                    </div>
                    
                    <form id="customer-form">
                        <div class="form-group">
                            <label class="form-label">遊戲ID（暱稱）</label>
                            <input type="text" class="form-input" id="game-id" placeholder="請輸入您的遊戲ID" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">聯絡方式</label>
                            <select class="form-select" id="contact-type" required>
                                <option value="">選擇聯絡方式</option>
                                <option value="line">LINE</option>
                                <option value="discord">Discord</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">聯絡帳號</label>
                            <input type="text" class="form-input" id="contact-id" placeholder="請輸入您的聯絡帳號" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">預約時間</label>
                            <input type="datetime-local" class="form-input" id="booking-time" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">特殊需求（選填）</label>
                            <textarea class="form-textarea" id="special-request" placeholder="請輸入任何特殊需求或備註..."></textarea>
                        </div>
                    </form>
                    
                    <div class="btn-group">
                        <button onclick="prevStep()" class="btn btn-secondary">上一步</button>
                        <button onclick="nextStep()" class="btn btn-success">下一步：選擇付款方式</button>
                    </div>
                </div>

                <!-- 步驟3：選擇付款方式 -->
                <div id="payment-step3" class="payment-step" style="display: none;">
                    <h2 class="payment-title">選擇付款方式</h2>
                    
                    <div class="order-summary">
                        <h3 style="color: var(--warning-color); margin-bottom: 15px;">訂單確認</h3>
                        <div class="order-item">
                            <span id="confirm-service-name">尚未選擇服務</span>
                            <span id="confirm-service-price">0元</span>
                        </div>
                        <div class="order-item">
                            <span>預約時間</span>
                            <span id="confirm-booking-time">未設定</span>
                        </div>
                        <div class="order-total">
                            <span>應付金額</span>
                            <span id="confirm-order-total">0元</span>
                        </div>
                    </div>
                    
                    <h3 style="color: #66b3ff; margin: 30px 0 20px;">請選擇付款方式</h3>
                    
                    <div class="payment-methods">
                        <div class="payment-method" onclick="selectPaymentMethod('linepay')">
                            <div class="payment-icon">💳</div>
                            <div style="font-weight: bold;">LINE Pay</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">快速安全支付</div>
                        </div>
                        
                        <div class="payment-method" onclick="selectPaymentMethod('bank')">
                            <div class="payment-icon">🏦</div>
                            <div style="font-weight: bold;">銀行轉帳</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ATM/網銀轉帳</div>
                        </div>
    
                        <div class="payment-method" onclick="selectPaymentMethod('711')">
                            <div class="payment-icon">🏪</div>
                            <div style="font-weight: bold;">超商代碼</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">7-11/全家</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: rgba(255, 204, 0, 0.1); border-radius: 10px;">
                        <h4 style="color: var(--warning-color); margin-bottom: 10px;">⚠️ 付款注意事項</h4>
                        <ul style="color: #ffdd66; padding-left: 20px;">
                            <li>付款完成後請提供付款證明給客服</li>
                            <li>確認收款後客服會主動與您聯繫</li>
                            <li>付款後10分鐘內未收到確認請聯繫客服</li>
                        </ul>
                    </div>
                    
                    <div class="btn-group">
                        <button onclick="prevStep()" class="btn btn-secondary">上一步</button>
                        <button onclick="nextStep()" class="btn btn-success">下一步：確認訂單</button>
                    </div>
                </div>

                <!-- 步驟4：確認訂單 -->
                <div id="payment-step4" class="payment-step" style="display: none;">
                    <div class="confirmation-box">
                        <div class="confirmation-icon">✅</div>
                        <h2 class="confirmation-title">訂單已建立</h2>
                        <p class="confirmation-text">您的訂單已成功建立，請完成付款以確認預約</p>
                        
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 25px; border-radius: 10px; margin: 25px 0;">
                            <div class="order-item">
                                <span>訂單編號</span>
                                <span class="order-id" id="order-id-display">DELTA-2024-0001</span>
                            </div>
                            <div class="order-item">
                                <span>服務項目</span>
                                <span id="final-service-name">尚未選擇服務</span>
                            </div>
                            <div class="order-item">
                                <span>付款金額</span>
                                <span id="final-order-total" style="color: var(--secondary-color); font-weight: bold;">0元</span>
                            </div>
                            <div class="order-item">
                                <span>付款方式</span>
                                <span id="final-payment-method">未選擇</span>
                            </div>
                        </div>
                        
                        <div style="margin: 30px 0;">
                            <h3 style="color: #66b3ff; margin-bottom: 15px;">📋 下一步操作</h3>
                            <div style="color: var(--text-secondary); text-align: left; max-width: 500px; margin: 0 auto;">
                                1. 請在 <strong style="color: var(--warning-color);">15分鐘內</strong> 完成付款<br>
                                2. 付款後請將 <strong style="color: var(--warning-color);">付款證明截圖</strong><br>
                                3. 聯繫客服提供訂單編號及付款證明<br>
                                4. 客服確認後會立即為您安排服務
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button onclick="printOrder()" class="btn btn-secondary">列印訂單</button>
                            <button onclick="window.open('https://line.me/R/ti/p/@510qapos', '_blank')" class="btn btn-success">聯繫客服完成付款</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 聯繫區 -->
        <div class="contact-section">
            <h2 class="contact-title">📞 需要協助？</h2>
            <div class="contact-info">官方LINE客服：@510qapos</div>
            <div class="contact-info">服務時間：每日 10:00 - 02:00</div>
            <div class="contact-info">緊急聯繫：24小時值班客服</div>
            <div style="margin-top: 30px; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; display: inline-block;">
                <div style="color: var(--warning-color); font-size: 1.2rem; margin-bottom: 10px;">掃描QR Code添加客服</div>
                <div class="contact-qr">
                    <div style="width: 150px; height: 150px; background: #333; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: #666;">
                        <img src="https://qr-official.line.me/gs/M_510qapos_GW.png?oat_content=qr">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 頁腳 -->
    <footer class="footer">
        <div>三角洲行動 · 專業戰術支援服務</div>
        <div style="margin-top: 10px;">© 2024 三角洲行動戰術支援服務中心 | 版本：2024.01</div>
        <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-muted);">本服務僅供娛樂參考，請遵守遊戲規則與相關法律</div>
    </footer>

    <!-- 管理後台 -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h1 class="admin-title">📊 訂單管理後台</h1>
            <p style="color: var(--text-secondary);">完全內嵌 · 無需外部設定 · 即時同步</p>
        </div>

        <!-- 登入表單 -->
        <div class="admin-login" id="adminLogin">
            <h2 style="color: var(--warning-color); text-align: center; margin-bottom: 30px;">管理員登入</h2>
            <div class="login-form">
                <input type="password" id="adminPassword" class="login-input" placeholder="輸入管理員密碼" autocomplete="off">
                <button onclick="adminLogin()" class="login-btn">登入</button>
                <button onclick="closeAdminPanel()" class="login-btn" style="background: var(--border-color);">取消</button>
            </div>
            <p style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                提示：我就不告訴你 嘿嘿嘿
            </p>
        </div>

        <!-- 訂單管理面板 -->
        <div class="orders-panel" id="ordersPanel">
            <div class="orders-header">
                <h2 style="color: var(--warning-color);">📋 訂單列表</h2>
                <div class="orders-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalOrders">0</div>
                        <div class="stat-label">總訂單數</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingOrders">0</div>
                        <div class="stat-label">待處理</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayOrders">0</div>
                        <div class="stat-label">今日訂單</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalRevenue">0</div>
                        <div class="stat-label">總收入</div>
                    </div>
                </div>
            </div>

            <!-- 訂單篩選器 -->
            <div class="order-filters">
                <button class="filter-btn active" onclick="filterOrders('all')">全部訂單</button>
                <button class="filter-btn" onclick="filterOrders('pending')">待處理</button>
                <button class="filter-btn" onclick="filterOrders('paid')">已付款</button>
                <button class="filter-btn" onclick="filterOrders('processing')">處理中</button>
                <button class="filter-btn" onclick="filterOrders('completed')">已完成</button>
                <button class="filter-btn" onclick="filterOrders('cancelled')">已取消</button>
                <button class="filter-btn" onclick="refreshOrders()" style="background: var(--secondary-color); color: var(--dark-bg);">🔄 刷新</button>
                <button class="filter-btn" onclick="exportOrders()" style="background: var(--accent-color); color: white;">📤 匯出</button>
                <button class="filter-btn" onclick="showSyncPanel()" style="background: #ff66ff; color: white;">🔄 資料同步</button>
                <button onclick="closeAdminPanel()" class="filter-btn" style="background: var(--danger-color); color: white;">❌ 關閉</button>
            </div>

            <!-- 訂單表格 -->
            <div class="orders-table">
                <div class="table-header">
                    <div>訂單編號</div>
                    <div>服務項目</div>
                    <div>客戶資訊</div>
                    <div>預約時間</div>
                    <div>金額</div>
                    <div>狀態</div>
                    <div>操作</div>
                </div>
                <div id="ordersList">
                    <!-- 訂單將動態生成在這裡 -->
                </div>
            </div>

            <!-- 資料同步面板 -->
            <div class="sync-panel" id="syncPanel" style="display: none;">
                <h3 style="color: var(--secondary-color); margin-bottom: 15px;">🔄 跨裝置資料同步</h3>
                <p style="color: var(--text-secondary); margin-bottom: 15px;">
                    將以下同步碼分享給其他管理員，或輸入同步碼來同步訂單資料：
                </p>
                
                <div class="settings-grid">
                    <div class="setting-item">
                        <h4 style="color: var(--warning-color); margin-bottom: 10px;">產生同步碼</h4>
                        <button onclick="generateSyncCode()" class="login-btn" style="width: 100%;">產生新同步碼</button>
                        <div class="sync-code-display" id="syncCodeDisplay">
                            點擊上方按鈕產生同步碼
                        </div>
                        <p style="color: var(--text-secondary); font-size: 0.8rem; margin-top: 10px;">
                            此同步碼24小時內有效，分享給其他管理員
                        </p>
                    </div>
                    
                    <div class="setting-item">
                        <h4 style="color: var(--warning-color); margin-bottom: 10px;">輸入同步碼</h4>
                        <textarea id="inputSyncCode" class="login-input" placeholder="貼上同步碼..." rows="4" style="width: 100%;"></textarea>
                        <button onclick="importFromSyncCode()" class="login-btn" style="width: 100%; margin-top: 10px; background: var(--warning-color); color: var(--dark-bg);">匯入資料</button>
                        <p style="color: var(--text-secondary); font-size: 0.8rem; margin-top: 10px;">
                            貼上其他管理員分享的同步碼來同步資料
                        </p>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(255, 102, 0, 0.1); border-radius: 8px;">
                    <strong style="color: var(--warning-color);">💡 同步說明：</strong>
                    <ul style="color: var(--text-secondary); margin-top: 10px; padding-left: 20px;">
                        <li>每個管理員都會看到相同的訂單資料</li>
                        <li>同步碼自動加密，保障資料安全</li>
                        <li>訂單狀態更新會即時同步</li>
                        <li>建議定期同步以保持資料一致</li>
                    </ul>
                </div>
            </div>

            <!-- 系統設定 -->
            <div class="system-settings">
                <h3 style="color: var(--accent-color); margin-bottom: 20px;">⚙️ 系統設定</h3>
                <div class="settings-grid">
                    <div class="setting-item">
                        <h4 style="color: var(--warning-color); margin-bottom: 10px;">基本設定</h4>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; color: var(--text-secondary); margin-bottom: 5px;">管理員密碼：</label>
                            <input type="password" id="newAdminPassword" class="login-input" placeholder="輸入新密碼" style="width: 100%;">
                        </div>
                        <button onclick="changeAdminPassword()" class="login-btn" style="width: 100%;">更改密碼</button>
                    </div>
                    
                    <div class="setting-item">
                        <h4 style="color: var(--warning-color); margin-bottom: 10px;">通知設定</h4>
                        <div style="margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; gap: 10px; color: var(--text-secondary);">
                                <input type="checkbox" id="enableNotifications" checked>
                                啟用新訂單通知
                            </label>
                        </div>
                        <button onclick="saveNotificationSettings()" class="login-btn" style="width: 100%; background: var(--warning-color); color: var(--dark-bg);">儲存設定</button>
                    </div>
                    
                    <div class="setting-item">
                        <h4 style="color: var(--warning-color); margin-bottom: 10px;">資料管理</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button onclick="exportOrders()" class="login-btn" style="width: 100%; background: var(--accent-color);">匯出訂單</button>
                            <button onclick="backupData()" class="login-btn" style="width: 100%; background: #6666ff;">備份資料</button>
                            <button onclick="clearOldOrders()" class="login-btn" style="width: 100%; background: var(--danger-color);">清除舊訂單</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 訂單詳情彈窗 -->
            <div class="order-detail-modal" id="orderDetailModal">
                <div class="order-detail-content">
                    <button class="close-modal" onclick="closeOrderDetail()">×</button>
                    <h2 style="color: var(--warning-color); margin-bottom: 20px;">📄 訂單詳情</h2>
                    
                    <div class="order-detail-grid">
                        <div class="detail-section">
                            <h4>訂單資訊</h4>
                            <div class="detail-item">
                                <span class="detail-label">訂單編號：</span>
                                <span class="detail-value" id="detailOrderId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">服務項目：</span>
                                <span class="detail-value" id="detailService">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">服務詳情：</span>
                                <span class="detail-value" id="detailDescription">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">訂單金額：</span>
                                <span class="detail-value" id="detailAmount">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">建立時間：</span>
                                <span class="detail-value" id="detailCreateTime">-</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h4>客戶資訊</h4>
                            <div class="detail-item">
                                <span class="detail-label">遊戲ID：</span>
                                <span class="detail-value" id="detailGameId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">聯絡方式：</span>
                                <span class="detail-value" id="detailContactType">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">聯絡帳號：</span>
                                <span class="detail-value" id="detailContactId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">預約時間：</span>
                                <span class="detail-value" id="detailBookingTime">-</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h4>付款資訊</h4>
                            <div class="detail-item">
                                <span class="detail-label">付款方式：</span>
                                <span class="detail-value" id="detailPaymentMethod">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">付款狀態：</span>
                                <span class="detail-value" id="detailPaymentStatus">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">付款時間：</span>
                                <span class="detail-value" id="detailPaymentTime">-</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h4>訂單管理</h4>
                            <div class="detail-item">
                                <span class="detail-label">當前狀態：</span>
                                <span class="detail-value" id="detailStatus">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">負責打手：</span>
                                <span class="detail-value" id="detailAssignedTo">未指派</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">備註：</span>
                                <span class="detail-value" id="detailNotes">無</span>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <button onclick="updateOrderStatus('paid')" class="action-btn view">標記為已付款</button>
                        <button onclick="updateOrderStatus('processing')" class="action-btn edit">開始處理</button>
                        <button onclick="updateOrderStatus('completed')" class="action-btn" style="background: #6666ff;">完成訂單</button>
                        <button onclick="updateOrderStatus('cancelled')" class="action-btn delete">取消訂單</button>
                        <button onclick="assignToMe()" class="action-btn" style="background: #ff66ff;">我來處理</button>
                        <button onclick="addOrderNote()" class="action-btn" style="background: var(--warning-color); color: var(--dark-bg);">新增備註</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================
        // 全域設定與變數
        // ============================
        
        const DEFAULT_ADMIN_PASSWORD = 'Smile1124';
        
        const SYSTEM_CONFIG = {
            get ADMIN_PASSWORD() {
                return localStorage.getItem('admin_password') || DEFAULT_ADMIN_PASSWORD;
            },
            set ADMIN_PASSWORD(value) {
                localStorage.setItem('admin_password', value);
            },
            get ENABLE_NOTIFICATIONS() {
                return localStorage.getItem('enable_notifications') !== 'false';
            },
            set ENABLE_NOTIFICATIONS(value) {
                localStorage.setItem('enable_notifications', value);
            },
            SYNC_CODE_EXPIRY: 24 * 60 * 60 * 1000 // 24小時
        };
        
        const ORDER_STATUS = {
            PENDING: 'pending',
            PAID: 'paid',
            PROCESSING: 'processing',
            COMPLETED: 'completed',
            CANCELLED: 'cancelled'
        };
        
        let orders = [];
        let currentFilter = 'all';
        let currentOrderId = null;
        let notificationCheckInterval = null;
        let currentStep = 1;
        let selectedService = null;
        let selectedPaymentMethod = '';
        
        // ============================
        // 初始化
        // ============================
        
        document.addEventListener('DOMContentLoaded', function() {
            // 立即隱藏載入畫面（確保不會卡住）
            setTimeout(() => {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
            }, 100);
            
            // 初始化網站功能
            initWebsite();
            
            // 初始化管理系統
            initAdminSystem();
            
            // 載入訂單資料
            loadOrders();
            
            // 載入測試訂單（初次使用時）
            if (orders.length === 0) {
                loadSampleOrders();
            }
            
            // 開始訂單通知檢查
            startNotificationCheck();
            
            // 顯示初始化訊息
            console.log('系統初始化完成');
            console.log('初始密碼:', DEFAULT_ADMIN_PASSWORD);
        });
        
        function initWebsite() {
            // 手機版漢堡選單功能
            const menuToggle = document.getElementById('menuToggle');
            const navLinks = document.getElementById('navLinks');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', () => {
                    navLinks.classList.toggle('active');
                    
                    const spans = menuToggle.querySelectorAll('span');
                    if (navLinks.classList.contains('active')) {
                        spans[0].style.transform = 'rotate(45deg) translate(5px, 6px)';
                        spans[1].style.opacity = '0';
                        spans[2].style.transform = 'rotate(-45deg) translate(5px, -6px)';
                    } else {
                        spans[0].style.transform = 'none';
                        spans[1].style.opacity = '1';
                        spans[2].style.transform = 'none';
                    }
                });
                
                // 點擊導航連結後關閉漢堡選單（手機版）
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        if (window.innerWidth <= 768) {
                            navLinks.classList.remove('active');
                            const spans = menuToggle.querySelectorAll('span');
                            spans[0].style.transform = 'none';
                            spans[1].style.opacity = '1';
                            spans[2].style.transform = 'none';
                        }
                    });
                });
            }
            
            // 頁面切換功能
            window.showTab = function(tabId) {
                // 隱藏所有分頁
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // 移除所有導航連結的active類
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                // 顯示選中的分頁
                const targetTab = document.getElementById(tabId);
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                
                // 激活對應的導航連結
                const activeLink = document.querySelector(`[onclick="showTab('${tabId}')"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
                
                // 如果是付款頁面，重置付款流程
                if (tabId === 'payment') {
                    resetPaymentSteps();
                }
                
                // 滾動到頂部
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            
            // 設定日期時間輸入框的最小值和預設值
            const bookingTimeInput = document.getElementById('booking-time');
            if (bookingTimeInput) {
                const now = new Date();
                const minDate = new Date(now.getTime() + 3600000); // 1小時後
                bookingTimeInput.min = minDate.toISOString().slice(0, 16);
                bookingTimeInput.value = minDate.toISOString().slice(0, 16);
            }
            
            // 設置訂單通知
            setupOrderNotifications();
            
            // 測試密碼功能
            console.log('當前儲存的密碼:', SYSTEM_CONFIG.ADMIN_PASSWORD);
        }
        
        function initAdminSystem() {
            // 載入設定到表單
            const enableNotifications = document.getElementById('enableNotifications');
            if (enableNotifications) {
                enableNotifications.checked = SYSTEM_CONFIG.ENABLE_NOTIFICATIONS;
            }
            
            
        }
        
        function loadOrders() {
            const saved = localStorage.getItem('delta_orders');
            if (saved) {
                try {
                    orders = JSON.parse(saved);
                    console.log(`載入 ${orders.length} 筆訂單`);
                } catch (e) {
                    console.error('載入訂單資料失敗:', e);
                    orders = [];
                }
            } else {
                console.log('無訂單資料，使用預設值');
                orders = [];
            }
        }
        
        // ============================
        // 付款流程功能
        // ============================
        
        function selectService(name, price, description) {
            selectedService = {
                name: name,
                price: parseInt(price),
                description: description
            };
            
            // 更新顯示
            updateSelectedServiceDisplay();
            
            // 更新其他顯示元素
            const elementsToUpdate = {
                'selected-service-name': `${name} - ${description}`,
                'selected-service-price': `${price}元`,
                'order-total': `${price}元`,
                'confirm-service-name': `${name} - ${description}`,
                'confirm-service-price': `${price}元`,
                'confirm-order-total': `${price}元`,
                'final-service-name': `${name} - ${description}`,
                'final-order-total': `${price}元`,
                'displayServiceName': name,
                'displayServiceDescription': description,
                'displayServicePrice': `${price}元`
            };
            
            for (const [id, text] of Object.entries(elementsToUpdate)) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = text;
                }
            }
            
            // 切換到付款頁面
            showTab('payment');
            resetPaymentSteps();
            goToStep(1);
        }
        
        function updateSelectedServiceDisplay() {
            const displayElement = document.getElementById('selectedServiceDisplay');
            if (selectedService && displayElement) {
                displayElement.classList.add('active');
            } else if (displayElement) {
                displayElement.classList.remove('active');
            }
        }
        
        function clearServiceSelection() {
            selectedService = null;
            selectedPaymentMethod = '';
            
            // 重置顯示
            const displayElement = document.getElementById('selectedServiceDisplay');
            if (displayElement) {
                displayElement.classList.remove('active');
            }
            
            // 重置表格顯示
            const elementsToReset = [
                'selected-service-name',
                'selected-service-price',
                'order-total',
                'confirm-service-name',
                'confirm-service-price',
                'confirm-order-total',
                'final-service-name',
                'final-order-total',
                'displayServiceName',
                'displayServiceDescription',
                'displayServicePrice'
            ];
            
            elementsToReset.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    if (id.includes('price') || id.includes('total') || id.includes('ServicePrice')) {
                        element.textContent = '0元';
                    } else if (id.includes('ServiceName')) {
                        element.textContent = '尚未選擇服務';
                    } else if (id.includes('Description')) {
                        element.textContent = '';
                    } else {
                        element.textContent = '尚未選擇服務';
                    }
                }
            });
            
            // 重置步驟
            goToStep(1);
        }
        
        function goToStep(step) {
            // 隱藏所有步驟
            document.querySelectorAll('.payment-step').forEach(el => {
                el.style.display = 'none';
            });
            
            // 顯示當前步驟
            const currentStepEl = document.getElementById(`payment-step${step}`);
            if (currentStepEl) {
                currentStepEl.style.display = 'block';
            }
            
            // 更新步驟指示器
            document.querySelectorAll('.step').forEach((el, index) => {
                el.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    el.classList.add('completed');
                } else if (index + 1 === step) {
                    el.classList.add('active');
                }
            });
            
            currentStep = step;
        }
        
        function nextStep() {
            if (currentStep < 4) {
                // 檢查是否已選擇服務（步驟1）
                if (currentStep === 1 && !selectedService) {
                    alert('請先選擇服務項目');
                    return;
                }
                
                // 表單驗證（步驟2）
                if (currentStep === 2) {
                    if (!validateForm()) {
                        alert('請填寫所有必填欄位');
                        return;
                    }
                    
                    // 更新確認頁面的資料
                    const bookingTimeInput = document.getElementById('booking-time');
                    const confirmBookingTime = document.getElementById('confirm-booking-time');
                    if (bookingTimeInput && confirmBookingTime) {
                        confirmBookingTime.textContent = bookingTimeInput.value || '未設定';
                    }
                }
                
                // 檢查付款方式（步驟3）
                if (currentStep === 3 && !selectedPaymentMethod) {
                    alert('請選擇付款方式');
                    return;
                }
                
                // 如果是最後一步，完成訂單
                if (currentStep === 3 && selectedService) {
                    // 收集訂單資料
                    const orderData = {
                        serviceName: selectedService.name,
                        description: selectedService.description,
                        amount: selectedService.price,
                        gameId: document.getElementById('game-id')?.value || '',
                        contactType: document.getElementById('contact-type')?.value || '',
                        contactId: document.getElementById('contact-id')?.value || '',
                        bookingTime: document.getElementById('booking-time')?.value || '',
                        specialRequest: document.getElementById('special-request')?.value || '',
                        paymentMethod: selectedPaymentMethod,
                        status: ORDER_STATUS.PENDING,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    };
                    
                    // 建立訂單
                    const orderId = createOrder(orderData);
                    
                    // 顯示訂單編號
                    const orderIdDisplay = document.getElementById('order-id-display');
                    if (orderIdDisplay) {
                        orderIdDisplay.textContent = orderId;
                    }
                    
                    // 顯示付款方式
                    const finalPaymentMethod = document.getElementById('final-payment-method');
                    if (finalPaymentMethod) {
                        finalPaymentMethod.textContent = getPaymentMethodText(selectedPaymentMethod);
                    }
                    
                    // 顯示成功訊息
                    alert(`訂單建立成功！\n訂單編號：${orderId}\n請聯繫客服完成付款。`);
                }
                
                goToStep(currentStep + 1);
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }
        
        function resetPaymentSteps() {
            currentStep = 1;
            selectedPaymentMethod = '';
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            goToStep(1);
        }
        
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // 更新UI
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }
        
        function validateForm() {
            const gameId = document.getElementById('game-id')?.value.trim();
            const contactType = document.getElementById('contact-type')?.value;
            const contactId = document.getElementById('contact-id')?.value.trim();
            const bookingTime = document.getElementById('booking-time')?.value;
            
            // 基本驗證
            if (!gameId || !contactType || !contactId || !bookingTime) {
                return false;
            }
            
            // 遊戲ID長度驗證
            if (gameId.length < 2 || gameId.length > 20) {
                alert('遊戲ID長度應在2-20字元之間');
                return false;
            }
            
            // 聯絡帳號驗證
            if (contactId.length < 3) {
                alert('聯絡帳號長度不足');
                return false;
            }
            
            return true;
        }
        
        function printOrder() {
            window.print();
        }
        
        // ============================
        // 訂單管理功能
        // ============================
        
        function createOrder(orderData) {
            const now = new Date();
            const orderId = `DELTA-${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}-${String(orders.length + 1).padStart(4, '0')}`;
            
            const newOrder = {
                id: orderId,
                ...orderData,
                paymentTime: null,
                assignedTo: null,
                notes: ''
            };
            
            orders.unshift(newOrder);
            saveOrders();
            
            // 發送通知
            if (SYSTEM_CONFIG.ENABLE_NOTIFICATIONS) {
                showNewOrderNotification(newOrder);
            }
            
            return orderId;
        }
        
        function saveOrders() {
            localStorage.setItem('delta_orders', JSON.stringify(orders));
        }
        
        function refreshOrders() {
            loadOrders();
            renderOrders();
            updateOrderStats();
        }
        
        function filterOrders(status) {
            currentFilter = status;
            
            // 更新按鈕狀態
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 找到被點擊的按鈕並設置為active
            const clickedBtn = event.target;
            clickedBtn.classList.add('active');
            
            renderOrders();
        }
        
        function renderOrders() {
            const ordersList = document.getElementById('ordersList');
            if (!ordersList) return;
            
            let filteredOrders = [...orders];
            
            // 應用篩選
            if (currentFilter !== 'all') {
                filteredOrders = orders.filter(order => order.status === currentFilter);
            }
            
            // 排序：最新的在最上面
            filteredOrders.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            // 清空列表
            ordersList.innerHTML = '';
            
            if (filteredOrders.length === 0) {
                ordersList.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: var(--text-secondary);">
                        <div>暫無訂單資料</div>
                    </div>
                `;
                return;
            }
            
            // 渲染每個訂單
            filteredOrders.forEach(order => {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div>${order.id}</div>
                    <div>${order.serviceName}</div>
                    <div>${order.gameId || 'N/A'}</div>
                    <div>${formatDateTime(order.bookingTime)}</div>
                    <div>${order.amount}元</div>
                    <div><span class="order-status status-${order.status}">${getStatusText(order.status)}</span></div>
                    <div class="order-actions">
                        <button class="action-btn view" onclick="viewOrderDetail('${order.id}')">查看</button>
                        <button class="action-btn edit" onclick="editOrder('${order.id}')">編輯</button>
                        <button class="action-btn delete" onclick="deleteOrder('${order.id}')">刪除</button>
                    </div>
                `;
                ordersList.appendChild(row);
            });
        }
        
        function updateOrderStats() {
            const totalOrders = orders.length;
            const pendingOrders = orders.filter(o => o.status === ORDER_STATUS.PENDING).length;
            const today = new Date().toISOString().split('T')[0];
            const todayOrders = orders.filter(o => o.createdAt.split('T')[0] === today).length;
            const totalRevenue = orders
                .filter(o => o.status !== ORDER_STATUS.CANCELLED)
                .reduce((sum, order) => sum + parseInt(order.amount || 0), 0);
            
            const totalOrdersEl = document.getElementById('totalOrders');
            const pendingOrdersEl = document.getElementById('pendingOrders');
            const todayOrdersEl = document.getElementById('todayOrders');
            const totalRevenueEl = document.getElementById('totalRevenue');
            
            if (totalOrdersEl) totalOrdersEl.textContent = totalOrders;
            if (pendingOrdersEl) pendingOrdersEl.textContent = pendingOrders;
            if (todayOrdersEl) todayOrdersEl.textContent = todayOrders;
            if (totalRevenueEl) totalRevenueEl.textContent = totalRevenue + '元';
        }
        
        function viewOrderDetail(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            currentOrderId = orderId;
            
            // 填充訂單詳情
            const detailElements = {
                'detailOrderId': order.id,
                'detailService': order.serviceName,
                'detailDescription': order.description || order.specialRequest || '無',
                'detailAmount': (order.amount || 0) + '元',
                'detailCreateTime': formatDateTime(order.createdAt),
                'detailGameId': order.gameId || 'N/A',
                'detailContactType': getContactTypeText(order.contactType),
                'detailContactId': order.contactId || 'N/A',
                'detailBookingTime': formatDateTime(order.bookingTime),
                'detailPaymentMethod': getPaymentMethodText(order.paymentMethod),
                'detailPaymentStatus': order.status === ORDER_STATUS.PENDING ? '待付款' : '已付款',
                'detailPaymentTime': order.paymentTime ? formatDateTime(order.paymentTime) : '尚未付款',
                'detailStatus': `<span class="order-status status-${order.status}">${getStatusText(order.status)}</span>`,
                'detailAssignedTo': order.assignedTo || '未指派',
                'detailNotes': order.notes || '無'
            };
            
            for (const [id, value] of Object.entries(detailElements)) {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = value;
                }
            }
            
            // 顯示彈窗
            document.getElementById('orderDetailModal').classList.add('active');
        }
        
        function closeOrderDetail() {
            document.getElementById('orderDetailModal').classList.remove('active');
        }
        
        function updateOrderStatus(newStatus) {
            if (!currentOrderId) return;
            
            const orderIndex = orders.findIndex(o => o.id === currentOrderId);
            if (orderIndex === -1) return;
            
            orders[orderIndex].status = newStatus;
            orders[orderIndex].updatedAt = new Date().toISOString();
            
            // 如果是付款狀態，記錄付款時間
            if (newStatus === ORDER_STATUS.PAID && !orders[orderIndex].paymentTime) {
                orders[orderIndex].paymentTime = new Date().toISOString();
            }
            
            saveOrders();
            refreshOrders();
            
            // 更新詳情視窗
            viewOrderDetail(currentOrderId);
            
            alert(`訂單狀態已更新為：${getStatusText(newStatus)}`);
        }
        
        function assignToMe() {
            if (!currentOrderId) return;
            
            const playerName = prompt('請輸入您的名字（打手暱稱）：');
            if (playerName) {
                const orderIndex = orders.findIndex(o => o.id === currentOrderId);
                orders[orderIndex].assignedTo = playerName;
                orders[orderIndex].notes = `已指派給 ${playerName} 處理`;
                orders[orderIndex].status = ORDER_STATUS.PROCESSING;
                orders[orderIndex].updatedAt = new Date().toISOString();
                
                saveOrders();
                refreshOrders();
                viewOrderDetail(currentOrderId);
                
                alert(`訂單已指派給 ${playerName} 處理！`);
            }
        }
        
        function addOrderNote() {
            if (!currentOrderId) return;
            
            const note = prompt('請輸入備註：');
            if (note) {
                const orderIndex = orders.findIndex(o => o.id === currentOrderId);
                const currentNotes = orders[orderIndex].notes || '';
                orders[orderIndex].notes = currentNotes ? `${currentNotes}\n${note}` : note;
                orders[orderIndex].updatedAt = new Date().toISOString();
                
                saveOrders();
                refreshOrders();
                viewOrderDetail(currentOrderId);
                
                alert('備註已新增！');
            }
        }
        
        function editOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const notes = prompt('請輸入訂單備註：', order.notes || '');
            if (notes !== null) {
                order.notes = notes;
                order.updatedAt = new Date().toISOString();
                saveOrders();
                refreshOrders();
                alert('訂單備註已更新！');
            }
        }
        
        function deleteOrder(orderId) {
            if (!confirm('確定要刪除這個訂單嗎？此操作無法恢復！')) {
                return;
            }
            
            const orderIndex = orders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                orders.splice(orderIndex, 1);
                saveOrders();
                refreshOrders();
                alert('訂單已刪除！');
                
                if (currentOrderId === orderId) {
                    closeOrderDetail();
                }
            }
        }
        
        // ============================
        // 管理後台介面 - 修復的密碼驗證
        // ============================
        
        function openAdminPanel() {
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('ordersPanel').style.display = 'none';
            document.getElementById('syncPanel').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }
        
        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('active');
        }
        
        function adminLogin() {
            const passwordInput = document.getElementById('adminPassword');
            const password = passwordInput.value;
            
            console.log('輸入的密碼:', password);
            console.log('儲存的密碼:', SYSTEM_CONFIG.ADMIN_PASSWORD);
            console.log('預設密碼:', DEFAULT_ADMIN_PASSWORD);
            
            // 檢查密碼是否正確
            if (password === SYSTEM_CONFIG.ADMIN_PASSWORD || password === DEFAULT_ADMIN_PASSWORD) {
                // 登入成功
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('ordersPanel').style.display = 'block';
                refreshOrders();
                console.log('登入成功');
            } else {
                // 登入失敗
                alert('密碼錯誤！請輸入正確的管理員密碼。\n提示：初始密碼為 ' + DEFAULT_ADMIN_PASSWORD);
                passwordInput.value = '';
                passwordInput.focus();
                console.log('登入失敗：密碼不匹配');
            }
        }
        
        function showSyncPanel() {
            const syncPanel = document.getElementById('syncPanel');
            syncPanel.style.display = syncPanel.style.display === 'none' ? 'block' : 'none';
        }
        
        // ============================
        // 資料同步功能
        // ============================
        
        function generateSyncCode() {
            const syncData = {
                orders: orders,
                timestamp: new Date().getTime(),
                expiry: new Date().getTime() + SYSTEM_CONFIG.SYNC_CODE_EXPIRY
            };
            
            // 將資料轉為Base64編碼
            const jsonString = JSON.stringify(syncData);
            const syncCode = btoa(encodeURIComponent(jsonString));
            
            document.getElementById('syncCodeDisplay').textContent = syncCode;
            
            // 自動複製到剪貼簿
            navigator.clipboard.writeText(syncCode).then(() => {
                alert('同步碼已複製到剪貼簿！分享給其他管理員使用。');
            });
        }
        
        function importFromSyncCode() {
            const syncCode = document.getElementById('inputSyncCode').value.trim();
            if (!syncCode) {
                alert('請輸入同步碼！');
                return;
            }
            
            try {
                // 解碼Base64
                const jsonString = decodeURIComponent(atob(syncCode));
                const syncData = JSON.parse(jsonString);
                
                // 檢查是否過期
                if (new Date().getTime() > syncData.expiry) {
                    alert('同步碼已過期，請重新產生！');
                    return;
                }
                
                // 合併訂單資料
                syncData.orders.forEach(newOrder => {
                    const existingIndex = orders.findIndex(o => o.id === newOrder.id);
                    if (existingIndex === -1) {
                        // 新增訂單
                        orders.push(newOrder);
                    } else {
                        // 更新現有訂單（保留較新的資料）
                        const existingOrder = orders[existingIndex];
                        const existingTime = new Date(existingOrder.updatedAt || 0);
                        const newTime = new Date(newOrder.updatedAt || 0);
                        
                        if (newTime > existingTime) {
                            orders[existingIndex] = newOrder;
                        }
                    }
                });
                
                // 儲存並更新
                saveOrders();
                refreshOrders();
                alert(`成功同步 ${syncData.orders.length} 筆訂單資料！`);
                
                // 清空輸入框
                document.getElementById('inputSyncCode').value = '';
                
            } catch (error) {
                alert('同步碼無效或已損壞！');
                console.error('同步錯誤:', error);
            }
        }
        
        // ============================
        // 系統設定功能
        // ============================
        
        function changeAdminPassword() {
            const newPassword = document.getElementById('newAdminPassword').value;
            if (!newPassword) {
                alert('請輸入新密碼！');
                return;
            }
            
            if (newPassword.length < 4) {
                alert('密碼長度至少需要4個字元！');
                return;
            }
            
            SYSTEM_CONFIG.ADMIN_PASSWORD = newPassword;
            
            document.getElementById('newAdminPassword').value = '';
            alert('管理員密碼已更改！\n新密碼：' + newPassword);
        }
        
        function saveNotificationSettings() {
            const enableNotifications = document.getElementById('enableNotifications').checked;
            SYSTEM_CONFIG.ENABLE_NOTIFICATIONS = enableNotifications;
            
            if (enableNotifications) {
                startNotificationCheck();
            } else {
                stopNotificationCheck();
            }
            
            alert('通知設定已儲存！');
        }
        
        function exportOrders() {
            const dataStr = JSON.stringify(orders, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `delta_orders_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            alert('訂單資料已匯出！');
        }
        
        function backupData() {
            const backupData = {
                orders: orders,
                config: {
                    admin_password: SYSTEM_CONFIG.ADMIN_PASSWORD,
                    enable_notifications: SYSTEM_CONFIG.ENABLE_NOTIFICATIONS
                },
                backupTime: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `delta_backup_${new Date().getTime()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            alert('系統資料已備份！');
        }
        
        function clearOldOrders() {
            if (!confirm('確定要清除30天前的舊訂單嗎？此操作無法恢復！')) {
                return;
            }
            
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            const originalLength = orders.length;
            orders = orders.filter(order => {
                const orderDate = new Date(order.createdAt);
                return orderDate >= thirtyDaysAgo;
            });
            
            saveOrders();
            refreshOrders();
            
            alert(`已清除 ${originalLength - orders.length} 筆舊訂單！`);
        }
        
        // ============================
        // 通知功能
        // ============================
        
        function startNotificationCheck() {
            if (notificationCheckInterval) {
                clearInterval(notificationCheckInterval);
            }
            
            if (SYSTEM_CONFIG.ENABLE_NOTIFICATIONS) {
                notificationCheckInterval = setInterval(() => {
                    checkNewOrders();
                }, 30000); // 每30秒檢查一次
            }
        }
        
        function stopNotificationCheck() {
            if (notificationCheckInterval) {
                clearInterval(notificationCheckInterval);
                notificationCheckInterval = null;
            }
        }
        
        function checkNewOrders() {
            const lastCheck = localStorage.getItem('last_order_check') || new Date(0).toISOString();
            const newOrders = orders.filter(o => new Date(o.createdAt) > new Date(lastCheck));
            
            if (newOrders.length > 0) {
                newOrders.forEach(order => {
                    showNewOrderNotification(order);
                });
                
                localStorage.setItem('last_order_check', new Date().toISOString());
            }
        }
        
        function showNewOrderNotification(order) {
            const notification = document.getElementById('orderNotification');
            const notificationText = document.getElementById('notificationText');
            
            if (notification && notificationText) {
                notificationText.textContent = `訂單 ${order.id} - ${order.serviceName} (${order.amount}元)`;
                notification.style.display = 'block';
                
                // 播放提示音
                playNotificationSound();
                
                // 10秒後自動關閉
                setTimeout(() => {
                    if (notification.style.display === 'block') {
                        notification.style.display = 'none';
                    }
                }, 10000);
            }
        }
        
        function closeNotification() {
            document.getElementById('orderNotification').style.display = 'none';
        }
        
        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                // 如果音效播放失敗，忽略錯誤
            }
        }
        
        function setupOrderNotifications() {
            // 初始化最後檢查時間
            if (!localStorage.getItem('last_order_check')) {
                localStorage.setItem('last_order_check', new Date().toISOString());
            }
        }
        
        // ============================
        // 工具函數
        // ============================
        
        function formatDateTime(dateString) {
            if (!dateString) return '未設定';
            try {
                const date = new Date(dateString);
                return date.toLocaleString('zh-TW', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch (e) {
                return dateString;
            }
        }
        
        function getStatusText(status) {
            const statusMap = {
                [ORDER_STATUS.PENDING]: '待處理',
                [ORDER_STATUS.PAID]: '已付款',
                [ORDER_STATUS.PROCESSING]: '處理中',
                [ORDER_STATUS.COMPLETED]: '已完成',
                [ORDER_STATUS.CANCELLED]: '已取消'
            };
            return statusMap[status] || status || '未知狀態';
        }
        
        function getContactTypeText(type) {
            const typeMap = {
                'line': 'LINE',
                'discord': 'Discord'
            };
            return typeMap[type] || type || '未提供';
        }
        
        function getPaymentMethodText(method) {
            const methodMap = {
                'linepay': 'LINE Pay',
                'bank': '銀行轉帳',
                'crypto': '加密貨幣',
                '711': '超商代碼'
            };
            return methodMap[method] || method || '未選擇';
        }
        
        // ============================
        // 測試資料
        // ============================
        
        function loadSampleOrders() {
            const sampleOrders = [
                {
                    id: 'DELTA-20240001',
                    gameId: '遊戲玩家001',
                    contactType: 'line',
                    contactId: 'line001',
                    bookingTime: new Date(Date.now() + 86400000).toISOString(),
                    serviceName: '基礎單',
                    description: '保底 600w',
                    amount: '500',
                    specialRequest: '希望晚上時段',
                    status: ORDER_STATUS.PENDING,
                    createdAt: new Date(Date.now() - 3600000).toISOString(),
                    updatedAt: new Date(Date.now() - 3600000).toISOString(),
                    paymentMethod: '待確認',
                    notes: '新客戶，首次預約'
                },
                {
                    id: 'DELTA-20240002',
                    gameId: '資深玩家',
                    contactType: 'discord',
                    contactId: 'discord_user',
                    bookingTime: new Date(Date.now() + 172800000).toISOString(),
                    serviceName: '男陪玩-技術',
                    description: '每小時',
                    amount: '450',
                    specialRequest: '需要技術指導',
                    status: ORDER_STATUS.PAID,
                    createdAt: new Date(Date.now() - 7200000).toISOString(),
                    updatedAt: new Date(Date.now() - 3600000).toISOString(),
                    paymentMethod: 'LINE Pay',
                    paymentTime: new Date(Date.now() - 3600000).toISOString(),
                    assignedTo: '打手阿明',
                    notes: '已付款，等待服務'
                }
            ];
            
            orders = [...sampleOrders, ...orders];
            saveOrders();
        }
        
        // ============================
        // 確保載入畫面一定會隱藏
        // ============================
        
        // 監聽頁面完全載入
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
            }, 100);
        });
        
        // 安全超時，確保載入畫面不會永久顯示
        setTimeout(() => {
            const loadingOverlay = document.getElementById('loadingOverlay');
            if (loadingOverlay && loadingOverlay.style.display !== 'none') {
                loadingOverlay.style.display = 'none';
            }
        }, 3000); // 3秒後強制隱藏
        
        // ============================
        // 除錯工具
        // ============================
        
        window.debugPassword = function() {
            console.log('=== 密碼除錯資訊 ===');
            console.log('預設密碼:', DEFAULT_ADMIN_PASSWORD);
            console.log('儲存的密碼:', localStorage.getItem('admin_password'));
            console.log('系統配置密碼:', SYSTEM_CONFIG.ADMIN_PASSWORD);
            console.log('當前時間:', new Date().toLocaleString());
            
            // 檢查localStorage中是否有衝突的密碼設定
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.includes('password') || key.includes('admin')) {
                    console.log(`發現相關設定: ${key} = ${localStorage.getItem(key)}`);
                }
            }
            
            alert('請查看開發者工具控制台查看密碼除錯資訊');
        };
        
        window.resetPassword = function() {
            if (confirm('確定要重設密碼為預設值嗎？')) {
                localStorage.removeItem('admin_password');
                alert('密碼已重設為預設值: ' + DEFAULT_ADMIN_PASSWORD);
                console.log('密碼已重設');
            }
        };
    </script>
</body>
</html>
